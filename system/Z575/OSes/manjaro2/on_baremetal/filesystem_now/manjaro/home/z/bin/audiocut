#!/bin/bash

#$1 filename eg. Dream\ Theater\ -\ Illumination\ Theory\ \(Audio\)-fFMDGSWhHbo.m4a
#$2 fromtime eg. 15:52
#$3 totime eg. 3:53  (aka duration from fromtime)

if test "$#" -ne "3"; then
  cat << 'EOF'
$1 filename eg. Dream\ Theater\ -\ Illumination\ Theory\ \(Audio\)-fFMDGSWhHbo.m4a
$2 fromtime eg. 15:52
$3 totime eg. 3:53  (aka duration from fromtime)
EOF
  exit 1
fi



fname="$1"
fromtime="$2"
totaltime="$3"
prefix="cut."
ext="${fname##*.}"
#extension is required so that ffmpeg can infer the format, apparently!

#echo "$ext"
suffix="_${0/*\//}_fromtime_${fromtime/:/_}_totaltime_${totaltime/:/_}.${ext}"

set -x
ffmpeg -ss "$fromtime" -i "$fname" -acodec copy -aq 1 -vcodec copy -to "$totaltime" "${prefix}${fname}${suffix}"

