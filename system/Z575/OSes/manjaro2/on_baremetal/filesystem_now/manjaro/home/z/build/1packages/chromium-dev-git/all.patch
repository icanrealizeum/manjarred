make linking succeed with the following side effects:
- removing pdf support (possibly due to webrtc being disabled in args.gn?)
but possibly adding ppapi will allow pdf to link too(?) so it's not required to remove pdf in fact.
- removed gcd_private - for mdns=false to link

diff --git a/chrome/browser/BUILD.gn b/chrome/browser/BUILD.gn
index 5de84d1..0f601f3 100644
--- a/chrome/browser/BUILD.gn
+++ b/chrome/browser/BUILD.gn
@@ -230,5 +230,5 @@ split_static_library("browser") {
     "//third_party/libjingle",
     "//third_party/libxml",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//third_party/zlib",
     "//third_party/zlib:compression_utils",
diff --git a/chrome/browser/chrome_browser_main.cc b/chrome/browser/chrome_browser_main.cc
index 38baad1..c9a2484 100644
--- a/chrome/browser/chrome_browser_main.cc
+++ b/chrome/browser/chrome_browser_main.cc
@@ -51,5 +51,5 @@
 #include "chrome/browser/component_updater/file_type_policies_component_installer.h"
 #include "chrome/browser/component_updater/origin_trials_component_installer.h"
-#include "chrome/browser/component_updater/pepper_flash_component_installer.h"
+//#include "chrome/browser/component_updater/pepper_flash_component_installer.h"
 #include "chrome/browser/component_updater/recovery_component_installer.h"
 #include "chrome/browser/component_updater/sth_set_component_installer.h"
@@ -57,5 +57,5 @@
 #include "chrome/browser/component_updater/supervised_user_whitelist_installer.h"
 #include "chrome/browser/component_updater/swiftshader_component_installer.h"
-#include "chrome/browser/component_updater/widevine_cdm_component_installer.h"
+//#include "chrome/browser/component_updater/widevine_cdm_component_installer.h"
 #include "chrome/browser/defaults.h"
 #include "chrome/browser/first_run/first_run.h"
@@ -460,7 +460,7 @@ void RegisterComponentsForUpdate() {
 #if !defined(OS_CHROMEOS) && !defined(OS_ANDROID)
   RegisterRecoveryComponent(cus, g_browser_process->local_state());
-  RegisterPepperFlashComponent(cus);
+  //RegisterPepperFlashComponent(cus);
   RegisterSwiftShaderComponent(cus);
-  RegisterWidevineCdmComponent(cus);
+  //RegisterWidevineCdmComponent(cus);
 #endif  // !defined(OS_CHROMEOS) && !defined(OS_ANDROID)
 
diff --git a/chrome/browser/chrome_content_browser_client.cc b/chrome/browser/chrome_content_browser_client.cc
index df50338..8c1dbac 100644
--- a/chrome/browser/chrome_content_browser_client.cc
+++ b/chrome/browser/chrome_content_browser_client.cc
@@ -67,5 +67,5 @@
 #include "chrome/browser/profiles/profile_io_data.h"
 #include "chrome/browser/renderer_host/chrome_render_message_filter.h"
-#include "chrome/browser/renderer_host/pepper/chrome_browser_pepper_host_factory.h"
+//#include "chrome/browser/renderer_host/pepper/chrome_browser_pepper_host_factory.h"
 #include "chrome/browser/safe_browsing/safe_browsing_service.h"
 #include "chrome/browser/safe_browsing/ui_manager.h"
diff --git a/chrome/browser/extensions/api/resources_private/resources_private_api.cc b/chrome/browser/extensions/api/resources_private/resources_private_api.cc
index 37a7fa3..880a274 100644
--- a/chrome/browser/extensions/api/resources_private/resources_private_api.cc
+++ b/chrome/browser/extensions/api/resources_private/resources_private_api.cc
@@ -35,5 +35,5 @@ void AddStringsForIdentity(base::DictionaryValue* dict) {
 }
 
-void AddStringsForPdf(base::DictionaryValue* dict) {
+/*void AddStringsForPdf(base::DictionaryValue* dict) {
   SetL10nString(dict, "passwordPrompt", IDS_PDF_NEED_PASSWORD);
   SetL10nString(dict, "passwordSubmit", IDS_PDF_PASSWORD_SUBMIT);
@@ -51,5 +51,5 @@ void AddStringsForPdf(base::DictionaryValue* dict) {
   SetL10nString(dict, "tooltipZoomIn", IDS_PDF_TOOLTIP_ZOOM_IN);
   SetL10nString(dict, "tooltipZoomOut", IDS_PDF_TOOLTIP_ZOOM_OUT);
-}
+}*/
 
 }  // namespace
@@ -72,7 +72,7 @@ ExtensionFunction::ResponseAction ResourcesPrivateGetStringsFunction::Run() {
       AddStringsForIdentity(dict.get());
       break;
-    case api::resources_private::COMPONENT_PDF:
+/*    case api::resources_private::COMPONENT_PDF:
       AddStringsForPdf(dict.get());
-      break;
+      break;*/
     case api::resources_private::COMPONENT_NONE:
       NOTREACHED();
diff --git a/chrome/browser/extensions/browser_context_keyed_service_factories.cc b/chrome/browser/extensions/browser_context_keyed_service_factories.cc
index 9b39773..1585e01 100644
--- a/chrome/browser/extensions/browser_context_keyed_service_factories.cc
+++ b/chrome/browser/extensions/browser_context_keyed_service_factories.cc
@@ -22,10 +22,10 @@
 #include "chrome/browser/extensions/api/feedback_private/feedback_private_api.h"
 #include "chrome/browser/extensions/api/font_settings/font_settings_api.h"
-#include "chrome/browser/extensions/api/gcd_private/gcd_private_api.h"
+//#include "chrome/browser/extensions/api/gcd_private/gcd_private_api.h"
 #include "chrome/browser/extensions/api/history/history_api.h"
 #include "chrome/browser/extensions/api/hotword_private/hotword_private_api.h"
 #include "chrome/browser/extensions/api/identity/identity_api.h"
 #include "chrome/browser/extensions/api/language_settings_private/language_settings_private_delegate_factory.h"
-#include "chrome/browser/extensions/api/mdns/mdns_api.h"
+//#include "chrome/browser/extensions/api/mdns/mdns_api.h"
 #include "chrome/browser/extensions/api/omnibox/omnibox_api.h"
 #include "chrome/browser/extensions/api/passwords_private/passwords_private_event_router_factory.h"
@@ -95,5 +95,5 @@ void EnsureBrowserContextKeyedServiceFactoriesBuilt() {
   extensions::FeedbackPrivateAPI::GetFactoryInstance();
   extensions::FontSettingsAPI::GetFactoryInstance();
-  extensions::GcdPrivateAPI::GetFactoryInstance();
+//  extensions::GcdPrivateAPI::GetFactoryInstance();
   extensions::HistoryAPI::GetFactoryInstance();
   extensions::HotwordPrivateEventService::GetFactoryInstance();
@@ -111,5 +111,5 @@ void EnsureBrowserContextKeyedServiceFactoriesBuilt() {
   extensions::LogPrivateAPI::GetFactoryInstance();
 #endif
-  extensions::MDnsAPI::GetFactoryInstance();
+//  extensions::MDnsAPI::GetFactoryInstance();
 #if defined(OS_CHROMEOS)
   extensions::MediaPlayerAPI::GetFactoryInstance();
diff --git a/chrome/browser/extensions/plugin_manager.cc b/chrome/browser/extensions/plugin_manager.cc
index 57cd72a..4fa88a7 100644
--- a/chrome/browser/extensions/plugin_manager.cc
+++ b/chrome/browser/extensions/plugin_manager.cc
@@ -14,5 +14,5 @@
 #include "chrome/common/extensions/api/plugins/plugins_handler.h"
 #include "content/public/browser/plugin_service.h"
-#include "content/public/common/pepper_plugin_info.h"
+//#include "content/public/common/pepper_plugin_info.h"
 #include "extensions/browser/extension_registry.h"
 #include "extensions/common/extension.h"
@@ -145,5 +145,6 @@ void PluginManager::UpdatePluginListWithNaClModules() {
   if (!PathService::Get(chrome::FILE_NACL_PLUGIN, &path))
     return;
-  const content::PepperPluginInfo* pepper_info =
+  return;
+/*  const content::PepperPluginInfo* pepper_info =
       PluginService::GetInstance()->GetRegisteredPpapiPluginInfo(path);
   if (!pepper_info)
@@ -182,5 +183,5 @@ void PluginManager::UpdatePluginListWithNaClModules() {
       break;
     }
-  }
+  }*/
 }
 
diff --git a/chrome/browser/load_library_perf_test.cc b/chrome/browser/load_library_perf_test.cc
index 3b49e6a..ba4ad3d 100644
--- a/chrome/browser/load_library_perf_test.cc
+++ b/chrome/browser/load_library_perf_test.cc
@@ -17,5 +17,5 @@
 #include "testing/perf/perf_test.h"
 
-#include "widevine_cdm_version.h"  //  In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h"  //  In SHARED_INTERMEDIATE_DIR.
 
 #if defined(ENABLE_PEPPER_CDMS)
diff --git a/chrome/browser/prefs/browser_prefs.cc b/chrome/browser/prefs/browser_prefs.cc
index c62343a..93245e8 100644
--- a/chrome/browser/prefs/browser_prefs.cc
+++ b/chrome/browser/prefs/browser_prefs.cc
@@ -39,5 +39,5 @@
 #include "chrome/browser/notifications/extension_welcome_notification.h"
 #include "chrome/browser/notifications/notifier_state_tracker.h"
-#include "chrome/browser/pepper_flash_settings_manager.h"
+//#include "chrome/browser/pepper_flash_settings_manager.h"
 #include "chrome/browser/plugins/plugin_finder.h"
 #include "chrome/browser/prefs/chrome_pref_service_factory.h"
@@ -51,5 +51,5 @@
 #include "chrome/browser/profiles/profiles_state.h"
 #include "chrome/browser/push_messaging/push_messaging_app_identifier.h"
-#include "chrome/browser/renderer_host/pepper/device_id_fetcher.h"
+//#include "chrome/browser/renderer_host/pepper/device_id_fetcher.h"
 #include "chrome/browser/search/search.h"
 #include "chrome/browser/signin/signin_manager_factory.h"
@@ -536,5 +536,5 @@ void RegisterProfilePrefs(user_prefs::PrefRegistrySyncable* registry) {
 #else
   AppShortcutManager::RegisterProfilePrefs(registry);
-  DeviceIDFetcher::RegisterProfilePrefs(registry);
+//  DeviceIDFetcher::RegisterProfilePrefs(registry);
   DevToolsWindow::RegisterProfilePrefs(registry);
 #if defined(ENABLE_APP_LIST)
@@ -547,5 +547,5 @@ void RegisterProfilePrefs(user_prefs::PrefRegistrySyncable* registry) {
   gcm::GCMChannelStatusSyncer::RegisterProfilePrefs(registry);
   NewTabUI::RegisterProfilePrefs(registry);
-  PepperFlashSettingsManager::RegisterProfilePrefs(registry);
+  //PepperFlashSettingsManager::RegisterProfilePrefs(registry);
   PinnedTabCodec::RegisterProfilePrefs(registry);
   signin::RegisterProfilePrefs(registry);
diff --git a/chrome/browser/ui/browser.cc b/chrome/browser/ui/browser.cc
index 3951954..71df419 100644
--- a/chrome/browser/ui/browser.cc
+++ b/chrome/browser/ui/browser.cc
@@ -68,5 +68,5 @@
 #include "chrome/browser/memory/tab_manager_web_contents_data.h"
 #include "chrome/browser/notifications/notification_ui_manager.h"
-#include "chrome/browser/pepper_broker_infobar_delegate.h"
+//#include "chrome/browser/pepper_broker_infobar_delegate.h"
 #include "chrome/browser/permissions/permission_request_manager.h"
 #include "chrome/browser/prefs/incognito_mode_prefs.h"
@@ -1847,5 +1847,5 @@ bool Browser::RequestPpapiBrokerPermission(
     const base::FilePath& plugin_path,
     const base::Callback<void(bool)>& callback) {
-  PepperBrokerInfoBarDelegate::Create(web_contents, url, plugin_path, callback);
+//  PepperBrokerInfoBarDelegate::Create(web_contents, url, plugin_path, callback);
   return true;
 }
diff --git a/chrome/browser/ui/webui/options/content_settings_handler.cc b/chrome/browser/ui/webui/options/content_settings_handler.cc
index 990daf5..742d622 100644
--- a/chrome/browser/ui/webui/options/content_settings_handler.cc
+++ b/chrome/browser/ui/webui/options/content_settings_handler.cc
@@ -387,4 +387,5 @@ ContentSettingsHandler::MediaSettingsInfo::~MediaSettingsInfo() {
 }
 
+/*
 ContentSettingsHandler::MediaSettingsInfo::ForFlash::ForFlash()
     : default_setting(CONTENT_SETTING_DEFAULT),
@@ -399,5 +400,5 @@ ContentSettingsHandler::MediaSettingsInfo::ForFlash&
     ContentSettingsHandler::MediaSettingsInfo::forFlash() {
   return flash_settings_;
-}
+}*/
 
 ContentSettingsHandler::MediaSettingsInfo::ForOneType&
@@ -414,6 +415,6 @@ ContentSettingsHandler::MediaSettingsInfo::ForOneType&
 
 ContentSettingsHandler::MediaSettingsInfo::ForOneType::ForOneType()
-    : show_flash_default_link(false),
-      show_flash_exceptions_link(false),
+    : //show_flash_default_link(false),
+      //show_flash_exceptions_link(false),
       default_setting(CONTENT_SETTING_DEFAULT),
       policy_disable(false),
@@ -458,6 +459,6 @@ void ContentSettingsHandler::GetLocalizedValues(
     {"cookiesBlock3rdParty", IDS_COOKIES_BLOCK_3RDPARTY_CHKBOX},
     {"cookiesShowCookies", IDS_COOKIES_SHOW_COOKIES_BUTTON},
-    {"flashStorageSettings", IDS_FLASH_STORAGE_SETTINGS},
-    {"flashStorageUrl", IDS_FLASH_STORAGE_URL},
+    //{"flashStorageSettings", IDS_FLASH_STORAGE_SETTINGS},
+    //{"flashStorageUrl", IDS_FLASH_STORAGE_URL},
 #if BUILDFLAG(ENABLE_GOOGLE_NOW)
     {"googleGeolocationAccessEnable",
@@ -525,5 +526,5 @@ void ContentSettingsHandler::GetLocalizedValues(
     {"mediaStreamCameraBlock", IDS_MEDIA_STREAM_BLOCK_VIDEO_ONLY_RADIO},
     // Flash media settings.
-    {"mediaPepperFlashMicDefaultDivergedLabel",
+/*    {"mediaPepperFlashMicDefaultDivergedLabel",
      IDS_MEDIA_PEPPER_FLASH_MIC_DEFAULT_DIVERGED_LABEL},
     {"mediaPepperFlashCameraDefaultDivergedLabel",
@@ -535,5 +536,5 @@ void ContentSettingsHandler::GetLocalizedValues(
     {"mediaPepperFlashChangeLink", IDS_MEDIA_PEPPER_FLASH_CHANGE_LINK},
     {"mediaPepperFlashGlobalPrivacyURL", IDS_FLASH_GLOBAL_PRIVACY_URL},
-    {"mediaPepperFlashWebsitePrivacyURL", IDS_FLASH_WEBSITE_PRIVACY_URL},
+    {"mediaPepperFlashWebsitePrivacyURL", IDS_FLASH_WEBSITE_PRIVACY_URL},*/
     // PPAPI broker filter.
     {"ppapiBrokerHeader", IDS_PPAPI_BROKER_HEADER},
@@ -652,8 +653,8 @@ void ContentSettingsHandler::InitializeHandler() {
   PrefService* prefs = user_prefs::UserPrefs::Get(context);
   pref_change_registrar_.Init(prefs);
-  pref_change_registrar_.Add(
+/*  pref_change_registrar_.Add(
       prefs::kPepperFlashSettingsEnabled,
       base::Bind(&ContentSettingsHandler::OnPepperFlashPrefChanged,
-                 base::Unretained(this)));
+                 base::Unretained(this)));*/
   pref_change_registrar_.Add(
       prefs::kAudioCaptureAllowed,
@@ -692,5 +693,5 @@ void ContentSettingsHandler::InitializeHandler() {
                          base::Unretained(this)));
 
-  flash_settings_manager_.reset(new PepperFlashSettingsManager(this, context));
+  //flash_settings_manager_.reset(new PepperFlashSettingsManager(this, context));
 
   Profile* profile = Profile::FromWebUI(web_ui());
@@ -706,5 +707,5 @@ void ContentSettingsHandler::InitializeHandler() {
 void ContentSettingsHandler::InitializePage() {
   media_settings_.reset(new MediaSettingsInfo());
-  RefreshFlashMediaSettings();
+//  RefreshFlashMediaSettings();
 
   UpdateHandlersEnabledRadios();
@@ -766,9 +767,10 @@ void ContentSettingsHandler::Observe(
 }
 
-void ContentSettingsHandler::OnGetPermissionSettingsCompleted(
+/*void ContentSettingsHandler::OnGetPermissionSettingsCompleted(
     uint32_t request_id,
     bool success,
-    PP_Flash_BrowserOperations_Permission default_permission,
-    const ppapi::FlashSiteSettings& sites) {
+//    PP_Flash_BrowserOperations_Permission default_permission,
+    //const ppapi::FlashSiteSettings& sites
+    ) {
   MediaSettingsInfo::ForFlash& settings = media_settings_->forFlash();
   if (success && request_id == settings.last_refresh_request_id) {
@@ -785,5 +787,5 @@ void ContentSettingsHandler::OnGetPermissionSettingsCompleted(
     UpdateFlashMediaLinksVisibility(CONTENT_SETTINGS_TYPE_MEDIASTREAM_CAMERA);
   }
-}
+}*/
 
 void ContentSettingsHandler::UpdateSettingDefaultFromModel(
@@ -844,5 +846,5 @@ void ContentSettingsHandler::UpdateMediaSettingsFromPrefs(
   settings.default_setting_initialized = true;
 
-  UpdateFlashMediaLinksVisibility(type);
+//  UpdateFlashMediaLinksVisibility(type);
   UpdateMediaDeviceDropdownVisibility(type);
 }
@@ -884,5 +886,5 @@ void ContentSettingsHandler::UpdateExceptionsViewFromModel(
   } else if (type == CONTENT_SETTINGS_TYPE_MEDIASTREAM_MIC ||
              type == CONTENT_SETTINGS_TYPE_MEDIASTREAM_CAMERA) {
-    CompareMediaExceptionsWithFlash(type);
+    //CompareMediaExceptionsWithFlash(type);
     UpdateExceptionsViewFromHostContentSettingsMap(type);
   } else if (type == CONTENT_SETTINGS_TYPE_MIDI_SYSEX) {
@@ -1005,5 +1007,5 @@ void ContentSettingsHandler::UpdateNotificationExceptionsView() {
 }
 
-void ContentSettingsHandler::CompareMediaExceptionsWithFlash(
+/*void ContentSettingsHandler::CompareMediaExceptionsWithFlash(
     ContentSettingsType type) {
   MediaSettingsInfo::ForOneType& settings = media_settings_->forType(type);
@@ -1043,5 +1045,5 @@ void ContentSettingsHandler::CompareMediaExceptionsWithFlash(
   settings.exceptions_initialized = true;
   UpdateFlashMediaLinksVisibility(type);
-}
+}*/
 
 void ContentSettingsHandler::UpdateMIDISysExExceptionsView() {
@@ -1528,5 +1530,5 @@ HostContentSettingsMap*
 }
 
-void ContentSettingsHandler::RefreshFlashMediaSettings() {
+/*void ContentSettingsHandler::RefreshFlashMediaSettings() {
   MediaSettingsInfo::ForFlash& settings = media_settings_->forFlash();
   settings.initialized = false;
@@ -1552,5 +1554,5 @@ void ContentSettingsHandler::OnPepperFlashPrefChanged() {
   else
     media_settings_->forFlash().initialized = false;
-}
+}*/
 
 void ContentSettingsHandler::OnZoomLevelChanged(
@@ -1559,5 +1561,5 @@ void ContentSettingsHandler::OnZoomLevelChanged(
 }
 
-void ContentSettingsHandler::ShowFlashMediaLink(
+/*void ContentSettingsHandler::ShowFlashMediaLink(
     LinkType link_type, ContentSettingsType content_type, bool show) {
   MediaSettingsInfo::ForOneType& settings =
@@ -1625,5 +1627,5 @@ void ContentSettingsHandler::UpdateFlashMediaLinksVisibility(
     ShowFlashMediaLink(EXCEPTIONS, type, true);
   }
-}
+}*/
 
 void ContentSettingsHandler::UpdateMediaDeviceDropdownVisibility(
diff --git a/chrome/browser/ui/webui/options/content_settings_handler.h b/chrome/browser/ui/webui/options/content_settings_handler.h
index 2a6bfe8..5c50a30 100644
--- a/chrome/browser/ui/webui/options/content_settings_handler.h
+++ b/chrome/browser/ui/webui/options/content_settings_handler.h
@@ -14,7 +14,7 @@
 #include "base/scoped_observer.h"
 #include "base/values.h"
-#include "chrome/browser/pepper_flash_settings_manager.h"
+//#include "chrome/browser/pepper_flash_settings_manager.h"
 #include "chrome/browser/ui/webui/options/options_ui.h"
-#include "chrome/browser/ui/webui/options/pepper_flash_content_settings_utils.h"
+//#include "chrome/browser/ui/webui/options/pepper_flash_content_settings_utils.h"
 #include "components/content_settings/core/browser/content_settings_observer.h"
 #include "components/content_settings/core/common/content_settings.h"
@@ -32,6 +32,6 @@ namespace options {
 class ContentSettingsHandler : public OptionsPageUIHandler,
                                public content_settings::Observer,
-                               public content::NotificationObserver,
-                               public PepperFlashSettingsManager::Client {
+                               public content::NotificationObserver {
+//                               public PepperFlashSettingsManager::Client {
  public:
   struct ChooserTypeNameEntry;
@@ -58,9 +58,9 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
 
   // PepperFlashSettingsManager::Client implementation.
-  void OnGetPermissionSettingsCompleted(
+/*  void OnGetPermissionSettingsCompleted(
       uint32_t request_id,
       bool success,
       PP_Flash_BrowserOperations_Permission default_permission,
-      const ppapi::FlashSiteSettings& sites) override;
+      const ppapi::FlashSiteSettings& sites) override;*/
 
  private:
@@ -73,5 +73,5 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
 
     // Cached Pepper Flash settings.
-    struct ForFlash {
+/*    struct ForFlash {
       ForFlash();
       ~ForFlash();
@@ -81,5 +81,5 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
       bool initialized;
       uint32_t last_refresh_request_id;
-    };
+    };*/
 
     struct ForOneType {
@@ -95,15 +95,15 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
       bool policy_disable;
       bool default_setting_initialized;
-      MediaExceptions exceptions;
+      //MediaExceptions exceptions;
       bool exceptions_initialized;
     };
 
     ForOneType& forType(ContentSettingsType type);
-    ForFlash& forFlash();
+    //ForFlash& forFlash();
 
    private:
     ForOneType mic_settings_;
     ForOneType camera_settings_;
-    ForFlash flash_settings_;
+    //ForFlash flash_settings_;
 
     DISALLOW_COPY_AND_ASSIGN(MediaSettingsInfo);
@@ -147,5 +147,5 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
   // Compares the exceptions of the camera or microphone |type| with its Flash
   // counterparts and updates the Flash links' visibility accordingly.
-  void CompareMediaExceptionsWithFlash(ContentSettingsType type);
+//  void CompareMediaExceptionsWithFlash(ContentSettingsType type);
 
   // Clobbers and rebuilds just the MIDI SysEx exception table.
@@ -246,5 +246,5 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
   ProtocolHandlerRegistry* GetProtocolHandlerRegistry();
 
-  void RefreshFlashMediaSettings();
+  //void RefreshFlashMediaSettings();
 
   // Fills in |exceptions| with Values for the given |type| from |map|.
@@ -253,13 +253,13 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
                                        base::ListValue* exceptions);
 
-  void OnPepperFlashPrefChanged();
+  //void OnPepperFlashPrefChanged();
 
   // content::HostZoomMap subscription.
   void OnZoomLevelChanged(const content::HostZoomMap::ZoomLevelChange& change);
 
-  void ShowFlashMediaLink(
-      LinkType link_type, ContentSettingsType content_type, bool show);
+//  void ShowFlashMediaLink(
+//      LinkType link_type, ContentSettingsType content_type, bool show);
 
-  void UpdateFlashMediaLinksVisibility(ContentSettingsType type);
+//  void UpdateFlashMediaLinksVisibility(ContentSettingsType type);
 
   void UpdateMediaDeviceDropdownVisibility(ContentSettingsType type);
@@ -271,5 +271,5 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
   content::NotificationRegistrar notification_registrar_;
   PrefChangeRegistrar pref_change_registrar_;
-  std::unique_ptr<PepperFlashSettingsManager> flash_settings_manager_;
+  //std::unique_ptr<PepperFlashSettingsManager> flash_settings_manager_;
   std::unique_ptr<MediaSettingsInfo> media_settings_;
   std::unique_ptr<content::HostZoomMap::Subscription>
diff --git a/chrome/BUILD.gn b/chrome/BUILD.gn
index b2d01f3..c6de290 100644
--- a/chrome/BUILD.gn
+++ b/chrome/BUILD.gn
@@ -267,5 +267,5 @@ if (!is_android && !is_mac) {
     ]
 
-    data_deps += [ "//third_party/widevine/cdm:widevinecdmadapter" ]
+#    data_deps += [ "//third_party/widevine/cdm:widevinecdmadapter" ]
 
     if (is_multi_dll_chrome) {
diff --git a/chrome/chrome_browser.gypi b/chrome/chrome_browser.gypi
index c010005..eb943fc 100644
--- a/chrome/chrome_browser.gypi
+++ b/chrome/chrome_browser.gypi
@@ -1224,6 +1224,6 @@
       'browser/chrome_process_singleton.cc',
       'browser/chrome_process_singleton.h',
-      'browser/component_updater/widevine_cdm_component_installer.cc',
-      'browser/component_updater/widevine_cdm_component_installer.h',
+#      'browser/component_updater/widevine_cdm_component_installer.cc',
+#      'browser/component_updater/widevine_cdm_component_installer.h',
       'browser/custom_handlers/register_protocol_handler_permission_request.cc',
       'browser/custom_handlers/register_protocol_handler_permission_request.h',
@@ -3342,5 +3342,5 @@
         '../third_party/icu/icu.gyp:icuuc',
         '../third_party/libxml/libxml.gyp:libxml',
-        '../third_party/widevine/cdm/widevine_cdm.gyp:widevine_cdm_version_h',
+        #'../third_party/widevine/cdm/widevine_cdm.gyp:widevine_cdm_version_h',
         '../third_party/zlib/google/zip.gyp:compression_utils',
         '../third_party/zlib/google/zip.gyp:zip',
diff --git a/chrome/chrome_common.gypi b/chrome/chrome_common.gypi
index 39b33f6..df6b961 100644
--- a/chrome/chrome_common.gypi
+++ b/chrome/chrome_common.gypi
@@ -112,6 +112,6 @@
       'common/web_application_info.cc',
       'common/web_application_info.h',
-      'common/widevine_cdm_constants.cc',
-      'common/widevine_cdm_constants.h',
+      #'common/widevine_cdm_constants.cc',
+      #'common/widevine_cdm_constants.h',
     ],
     'chrome_common_extensions_sources': [
@@ -419,5 +419,5 @@
             '<(DEPTH)/media/media.gyp:media',
             '<(DEPTH)/third_party/re2/re2.gyp:re2',
-            '<(DEPTH)/third_party/widevine/cdm/widevine_cdm.gyp:widevine_cdm_version_h',
+            #'<(DEPTH)/third_party/widevine/cdm/widevine_cdm.gyp:widevine_cdm_version_h',
           ],
         }, {  # OS == ios
diff --git a/chrome/common/BUILD.gn b/chrome/common/BUILD.gn
index 491244e..e81bbbc 100644
--- a/chrome/common/BUILD.gn
+++ b/chrome/common/BUILD.gn
@@ -156,5 +156,5 @@ static_library("common") {
       "//mojo/public/cpp/bindings",
       "//third_party/re2",
-      "//third_party/widevine/cdm:version_h",
+#      "//third_party/widevine/cdm:version_h",
     ]
   }
@@ -342,5 +342,5 @@ static_library("constants") {
     "//components/nacl/common:switches",
     "//media:cdm_paths",  # Needed by chrome_paths.cc.
-    "//third_party/widevine/cdm:version_h",
+    #"//third_party/widevine/cdm:version_h",
   ]
 
diff --git a/chrome/common/chrome_content_client.cc b/chrome/common/chrome_content_client.cc
index da7909d..770112e 100644
--- a/chrome/common/chrome_content_client.cc
+++ b/chrome/common/chrome_content_client.cc
@@ -48,5 +48,5 @@
 #include "ui/base/layout.h"
 #include "ui/base/resource/resource_bundle.h"
-#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
 
 #if defined(OS_LINUX)
diff --git a/chrome/common/chrome_paths.cc b/chrome/common/chrome_paths.cc
index 8649931..20bd23b 100644
--- a/chrome/common/chrome_paths.cc
+++ b/chrome/common/chrome_paths.cc
@@ -34,5 +34,5 @@
 #endif
 
-#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
 
 namespace {
diff --git a/chrome/renderer/BUILD.gn b/chrome/renderer/BUILD.gn
index fc1868e..ff8edc1 100644
--- a/chrome/renderer/BUILD.gn
+++ b/chrome/renderer/BUILD.gn
@@ -68,5 +68,5 @@ static_library("renderer") {
     "//third_party/icu",
     "//third_party/re2",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//ui/surface",
     "//v8:v8",
diff --git a/chrome/renderer/chrome_content_renderer_client.cc b/chrome/renderer/chrome_content_renderer_client.cc
index ec4c0d6..b54e4a0 100644
--- a/chrome/renderer/chrome_content_renderer_client.cc
+++ b/chrome/renderer/chrome_content_renderer_client.cc
@@ -115,5 +115,5 @@
 #include "ui/base/resource/resource_bundle.h"
 #include "ui/base/webui/jstemplate_builder.h"
-#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
 
 #if !defined(DISABLE_NACL)
diff --git a/chrome/renderer/media/chrome_key_systems.cc b/chrome/renderer/media/chrome_key_systems.cc
index ba65f65..b4e5fe5 100644
--- a/chrome/renderer/media/chrome_key_systems.cc
+++ b/chrome/renderer/media/chrome_key_systems.cc
@@ -16,5 +16,5 @@
 #include "build/build_config.h"
 #include "chrome/common/render_messages.h"
-#include "components/cdm/renderer/widevine_key_system_properties.h"
+//#include "components/cdm/renderer/widevine_key_system_properties.h"
 #include "content/public/renderer/render_thread.h"
 #include "media/base/eme_constants.h"
@@ -25,5 +25,5 @@
 #endif
 
-#include "widevine_cdm_version.h" // In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h" // In SHARED_INTERMEDIATE_DIR.
 
 // The following must be after widevine_cdm_version.h.
diff --git a/chrome/renderer/plugins/plugin_uma.cc b/chrome/renderer/plugins/plugin_uma.cc
index 8c7c7c1..533978a 100644
--- a/chrome/renderer/plugins/plugin_uma.cc
+++ b/chrome/renderer/plugins/plugin_uma.cc
@@ -12,5 +12,5 @@
 #include "base/strings/string_util.h"
 #include "content/public/common/content_constants.h"
-#include "third_party/widevine/cdm/widevine_cdm_common.h"
+//#include "third_party/widevine/cdm/widevine_cdm_common.h"
 
 namespace {
diff --git a/chrome/test/BUILD.gn b/chrome/test/BUILD.gn
index 02f930a..f27a7dd 100644
--- a/chrome/test/BUILD.gn
+++ b/chrome/test/BUILD.gn
@@ -660,8 +660,16 @@ if (!is_android) {
     }  # enable_notifications
 
-    if (!use_aura || is_chromeos) {
-      sources -=
-          [ "../../ui/views/corewm/desktop_capture_controller_unittest.cc" ]
-    }
+#    if (!use_aura || is_chromeos) {
+#ERROR at //chrome/test/BUILD.gn:664:13: Item not found
+#          [ "../../ui/views/corewm/desktop_capture_controller_unittest.cc" ]
+#            ^-------------------------------------------------------------
+#You were trying to remove "../../ui/views/corewm/desktop_capture_controller_unittest.cc"
+#from the list but it wasn't there.
+#See //BUILD.gn:526:9: which caused the file to be included.
+#        "//chrome/test:load_library_perf_tests",
+#        ^--------------------------------------
+#      sources -=
+#          [ "../../ui/views/corewm/desktop_capture_controller_unittest.cc" ]
+#    }
   }
 
@@ -993,5 +1001,5 @@ test("browser_tests") {
       "//third_party/libjingle",
       "//third_party/webrtc/modules/desktop_capture",
-      "//third_party/widevine/cdm:version_h",
+#      "//third_party/widevine/cdm:version_h",
       "//ui/accessibility:test_support",
       "//ui/base:test_support",
@@ -1010,5 +1018,5 @@ test("browser_tests") {
       "//remoting/webapp:unit_tests",
       "//third_party/mesa:osmesa",
-      "//third_party/widevine/cdm:widevine_test_license_server",
+#      "//third_party/widevine/cdm:widevine_test_license_server",
     ]
 
@@ -1670,5 +1678,5 @@ if (!is_android) {
       "//testing/gtest",
       "//testing/perf",
-      "//third_party/widevine/cdm:version_h",
+#      "//third_party/widevine/cdm:version_h",
     ]
 
diff --git a/components/cdm/renderer/BUILD.gn b/components/cdm/renderer/BUILD.gn
index f364f89..47c67d4 100644
--- a/components/cdm/renderer/BUILD.gn
+++ b/components/cdm/renderer/BUILD.gn
@@ -5,6 +5,6 @@
 static_library("renderer") {
   sources = [
-    "widevine_key_system_properties.cc",
-    "widevine_key_system_properties.h",
+#    "widevine_key_system_properties.cc",
+#    "widevine_key_system_properties.h",
   ]
 
@@ -21,5 +21,5 @@ static_library("renderer") {
     "//content/public/renderer",
     "//media",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
   ]
 }
diff --git a/content/browser/renderer_host/render_message_filter.cc b/content/browser/renderer_host/render_message_filter.cc
index befd3b3..ead29d7 100644
--- a/content/browser/renderer_host/render_message_filter.cc
+++ b/content/browser/renderer_host/render_message_filter.cc
@@ -35,5 +35,5 @@
 #include "content/browser/loader/resource_dispatcher_host_impl.h"
 #include "content/browser/media/media_internals.h"
-#include "content/browser/renderer_host/pepper/pepper_security_helper.h"
+//#include "content/browser/renderer_host/pepper/pepper_security_helper.h"
 #include "content/browser/renderer_host/render_process_host_impl.h"
 #include "content/browser/renderer_host/render_view_host_delegate.h"
diff --git a/content/browser/renderer_host/render_process_host_impl.cc b/content/browser/renderer_host/render_process_host_impl.cc
index 49a1881..2eaca28 100644
--- a/content/browser/renderer_host/render_process_host_impl.cc
+++ b/content/browser/renderer_host/render_process_host_impl.cc
@@ -102,6 +102,6 @@
 #include "content/browser/renderer_host/media/video_capture_host.h"
 #include "content/browser/renderer_host/offscreen_canvas_surface_impl.h"
-#include "content/browser/renderer_host/pepper/pepper_message_filter.h"
-#include "content/browser/renderer_host/pepper/pepper_renderer_connection.h"
+//#include "content/browser/renderer_host/pepper/pepper_message_filter.h"
+//#include "content/browser/renderer_host/pepper/pepper_renderer_connection.h"
 #include "content/browser/renderer_host/render_message_filter.h"
 #include "content/browser/renderer_host/render_view_host_delegate.h"
@@ -1416,5 +1416,5 @@ void RenderProcessHostImpl::PropagateBrowserCommandLineToRenderer(
     switches::kDisableNotifications,
     switches::kDisableOverlayScrollbar,
-    switches::kDisablePepper3DImageChromium,
+    //switches::kDisablePepper3DImageChromium,
     switches::kDisablePermissionsAPI,
     switches::kDisablePresentationAPI,
@@ -1498,5 +1498,5 @@ void RenderProcessHostImpl::PropagateBrowserCommandLineToRenderer(
     switches::kReducedReferrerGranularity,
     switches::kReduceSecurityForTesting,
-    switches::kRegisterPepperPlugins,
+//    switches::kRegisterPepperPlugins,
     switches::kRendererStartupDialog,
     switches::kRootLayerScrolls,
diff --git a/content/public/child/BUILD.gn b/content/public/child/BUILD.gn
index 00bdfa3..09f186f 100644
--- a/content/public/child/BUILD.gn
+++ b/content/public/child/BUILD.gn
@@ -18,5 +18,5 @@ group("child") {
       public_deps += [
         "//content/gpu",
-        "//content/ppapi_plugin",
+#        "//content/ppapi_plugin",
       ]
     }
diff --git a/content/public/renderer/BUILD.gn b/content/public/renderer/BUILD.gn
index 75d4439..a04007e 100644
--- a/content/public/renderer/BUILD.gn
+++ b/content/public/renderer/BUILD.gn
@@ -41,5 +41,5 @@ source_set("renderer_sources") {
     "//third_party/WebKit/public:blink_headers",
     "//third_party/libjingle",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//ui/base",
     "//ui/base/ime",
diff --git a/content/renderer/BUILD.gn b/content/renderer/BUILD.gn
index 2014cc8..662976e 100644
--- a/content/renderer/BUILD.gn
+++ b/content/renderer/BUILD.gn
@@ -81,5 +81,5 @@ source_set("renderer") {
     "//third_party/libjingle",
     "//third_party/libyuv",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//ui/accessibility",
     "//ui/base",
diff --git a/content/renderer/media/render_media_client.h b/content/renderer/media/render_media_client.h
index 1d5d345..49e589c 100644
--- a/content/renderer/media/render_media_client.h
+++ b/content/renderer/media/render_media_client.h
@@ -15,5 +15,5 @@
 #include "content/common/content_export.h"
 #include "media/base/media_client.h"
-#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
 
 namespace content {
diff --git a/content/test/BUILD.gn b/content/test/BUILD.gn
index 8c8e58d..62ba8df 100644
--- a/content/test/BUILD.gn
+++ b/content/test/BUILD.gn
@@ -682,5 +682,5 @@ test("content_unittests") {
     "//third_party/libjingle",
     "//third_party/re2",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//ui/accessibility",
     "//ui/base:test_support",
diff --git a/extensions/BUILD.gn b/extensions/BUILD.gn
index 172bf46..605a1da 100644
--- a/extensions/BUILD.gn
+++ b/extensions/BUILD.gn
@@ -313,5 +313,5 @@ source_set("chrome_extensions_browsertests") {
     "//third_party/libjingle",
     "//third_party/webrtc/modules/desktop_capture",
-    "//third_party/widevine/cdm:version_h",
+    #"//third_party/widevine/cdm:version_h",
     "//ui/accessibility:test_support",
     "//ui/base:test_support",
diff --git a/media/base/key_systems.cc b/media/base/key_systems.cc
index 4567bf4..463f263 100644
--- a/media/base/key_systems.cc
+++ b/media/base/key_systems.cc
@@ -21,5 +21,5 @@
 #include "media/base/media.h"
 #include "media/base/media_client.h"
-#include "third_party/widevine/cdm/widevine_cdm_common.h"
+//#include "third_party/widevine/cdm/widevine_cdm_common.h"
 
 namespace media {
@@ -152,6 +152,6 @@ class ClearKeyProperties : public KeySystemProperties {
 static bool IsPotentiallySupportedKeySystem(const std::string& key_system) {
   // Known and supported key systems.
-  if (key_system == kWidevineKeySystem)
-    return true;
+//  if (key_system == kWidevineKeySystem)
+//    return true;
   if (key_system == kClearKeyKeySystem)
     return true;
diff --git a/media/BUILD.gn b/media/BUILD.gn
index a1f03af..cbb651f 100644
--- a/media/BUILD.gn
+++ b/media/BUILD.gn
@@ -603,5 +603,5 @@ test("media_unittests") {
     "//third_party/libwebm",
     "//third_party/libyuv",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//ui/gfx:test_support",
     "//url",
@@ -726,5 +726,5 @@ test("media_perftests") {
     "//testing/gtest",
     "//testing/perf",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//ui/gfx:test_support",
   ]
