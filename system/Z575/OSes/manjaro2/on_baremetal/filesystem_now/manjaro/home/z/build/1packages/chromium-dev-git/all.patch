make linking succeed with the following side effects:
- removing pdf support (possibly due to webrtc being disabled in args.gn?)
but possibly adding ppapi will allow pdf to link too(?) so it's not required to remove pdf in fact.
- removed gcd_private - for mdns=false to link

diff --git a/chrome/browser/browsing_data/cookies_tree_model.cc b/chrome/browser/browsing_data/cookies_tree_model.cc
index ad13ac3..b988303 100644
--- a/chrome/browser/browsing_data/cookies_tree_model.cc
+++ b/chrome/browser/browsing_data/cookies_tree_model.cc
@@ -18,5 +18,5 @@
 #include "chrome/browser/browsing_data/browsing_data_channel_id_helper.h"
 #include "chrome/browser/browsing_data/browsing_data_cookie_helper.h"
-#include "chrome/browser/browsing_data/browsing_data_flash_lso_helper.h"
+//#include "chrome/browser/browsing_data/browsing_data_flash_lso_helper.h"
 #include "chrome/browser/content_settings/cookie_settings_factory.h"
 #include "chrome/grit/generated_resources.h"
@@ -136,5 +136,5 @@ bool TypeIsProtected(CookieTreeNode::DetailedInfo::NodeType type) {
     case CookieTreeNode::DetailedInfo::TYPE_QUOTA:
     case CookieTreeNode::DetailedInfo::TYPE_CHANNEL_ID:
-    case CookieTreeNode::DetailedInfo::TYPE_FLASH_LSO:
+    //case CookieTreeNode::DetailedInfo::TYPE_FLASH_LSO:
       return false;
     default:
@@ -265,10 +265,10 @@ CookieTreeNode::DetailedInfo& CookieTreeNode::DetailedInfo::InitCacheStorage(
 }
 
-CookieTreeNode::DetailedInfo& CookieTreeNode::DetailedInfo::InitFlashLSO(
+/*CookieTreeNode::DetailedInfo& CookieTreeNode::DetailedInfo::InitFlashLSO(
     const std::string& flash_lso_domain) {
   Init(TYPE_FLASH_LSO);
   this->flash_lso_domain = flash_lso_domain;
   return *this;
-}
+}*/
 
 ///////////////////////////////////////////////////////////////////////////////
@@ -732,5 +732,5 @@ CookieTreeHostNode::GetOrCreateCacheStoragesNode() {
 }
 
-CookieTreeFlashLSONode* CookieTreeHostNode::GetOrCreateFlashLSONode(
+/*CookieTreeFlashLSONode* CookieTreeHostNode::GetOrCreateFlashLSONode(
     const std::string& domain) {
   DCHECK_EQ(GetHost(), domain);
@@ -740,5 +740,5 @@ CookieTreeFlashLSONode* CookieTreeHostNode::GetOrCreateFlashLSONode(
   AddChildSortedByTitle(flash_lso_child_);
   return flash_lso_child_;
-}
+}*/
 
 void CookieTreeHostNode::CreateContentException(
@@ -906,4 +906,5 @@ CookieTreeNode::DetailedInfo CookieTreeCacheStoragesNode::GetDetailedInfo()
 }
 
+/*
 ///////////////////////////////////////////////////////////////////////////////
 // CookieTreeFlashLSONode
@@ -926,5 +927,5 @@ CookieTreeNode::DetailedInfo CookieTreeFlashLSONode::GetDetailedInfo() const {
   return DetailedInfo().InitFlashLSO(domain_);
 }
-
+*/
 ///////////////////////////////////////////////////////////////////////////////
 // ScopedBatchUpdateNotifier
@@ -1161,9 +1162,9 @@ void CookiesTreeModel::PopulateCacheStorageUsageInfo(
 }
 
-void CookiesTreeModel::PopulateFlashLSOInfo(
+/*void CookiesTreeModel::PopulateFlashLSOInfo(
       LocalDataContainer* container) {
   ScopedBatchUpdateNotifier notifier(this, GetRoot());
   PopulateFlashLSOInfoWithFilter(container, &notifier, base::string16());
-}
+}*/
 
 void CookiesTreeModel::PopulateAppCacheInfoWithFilter(
@@ -1467,5 +1468,5 @@ void CookiesTreeModel::PopulateQuotaInfoWithFilter(
 }
 
-void CookiesTreeModel::PopulateFlashLSOInfoWithFilter(
+/*void CookiesTreeModel::PopulateFlashLSOInfoWithFilter(
     LocalDataContainer* container,
     ScopedBatchUpdateNotifier* notifier,
@@ -1488,5 +1489,5 @@ void CookiesTreeModel::PopulateFlashLSOInfoWithFilter(
     }
   }
-}
+}*/
 
 void CookiesTreeModel::SetBatchExpectation(int batches_expected, bool reset) {
diff --git a/chrome/browser/browsing_data/cookies_tree_model.h b/chrome/browser/browsing_data/cookies_tree_model.h
index c693ce7..b8f667f 100644
--- a/chrome/browser/browsing_data/cookies_tree_model.h
+++ b/chrome/browser/browsing_data/cookies_tree_model.h
@@ -48,5 +48,5 @@ class CookieTreeDatabasesNode;
 class CookieTreeFileSystemNode;
 class CookieTreeFileSystemsNode;
-class CookieTreeFlashLSONode;
+//class CookieTreeFlashLSONode;
 class CookieTreeHostNode;
 class CookieTreeIndexedDBNode;
@@ -109,5 +109,5 @@ class CookieTreeNode : public ui::TreeNode<CookieTreeNode> {
       TYPE_CACHE_STORAGES,    // This is used for CookieTreeCacheStoragesNode.
       TYPE_CACHE_STORAGE,     // This is used for CookieTreeCacheStorageNode.
-      TYPE_FLASH_LSO,         // This is used for CookieTreeFlashLSONode.
+      //TYPE_FLASH_LSO,         // This is used for CookieTreeFlashLSONode.
     };
 
@@ -141,5 +141,5 @@ class CookieTreeNode : public ui::TreeNode<CookieTreeNode> {
     DetailedInfo& InitCacheStorage(
         const content::CacheStorageUsageInfo* cache_storage_info);
-    DetailedInfo& InitFlashLSO(const std::string& flash_lso_domain);
+    //DetailedInfo& InitFlashLSO(const std::string& flash_lso_domain);
 
     NodeType node_type;
@@ -159,5 +159,5 @@ class CookieTreeNode : public ui::TreeNode<CookieTreeNode> {
     const content::ServiceWorkerUsageInfo* service_worker_info = nullptr;
     const content::CacheStorageUsageInfo* cache_storage_info = nullptr;
-    std::string flash_lso_domain;
+    //std::string flash_lso_domain;
   };
 
@@ -229,5 +229,5 @@ class CookieTreeHostNode : public CookieTreeNode {
   CookieTreeQuotaNode* UpdateOrCreateQuotaNode(
       std::list<BrowsingDataQuotaHelper::QuotaInfo>::iterator quota_info);
-  CookieTreeFlashLSONode* GetOrCreateFlashLSONode(const std::string& domain);
+  //CookieTreeFlashLSONode* GetOrCreateFlashLSONode(const std::string& domain);
 
   std::string canonicalized_host() const { return canonicalized_host_; }
@@ -260,5 +260,5 @@ class CookieTreeHostNode : public CookieTreeNode {
   CookieTreeServiceWorkersNode* service_workers_child_ = nullptr;
   CookieTreeCacheStoragesNode* cache_storages_child_ = nullptr;
-  CookieTreeFlashLSONode* flash_lso_child_ = nullptr;
+  //CookieTreeFlashLSONode* flash_lso_child_ = nullptr;
 
   // The URL for which this node was initially created.
@@ -667,4 +667,5 @@ class CookieTreeCacheStoragesNode : public CookieTreeNode {
 };
 
+/*
 // CookieTreeFlashLSONode ----------------------------------------------------
 class CookieTreeFlashLSONode : public CookieTreeNode {
@@ -681,5 +682,5 @@ class CookieTreeFlashLSONode : public CookieTreeNode {
 
   DISALLOW_COPY_AND_ASSIGN(CookieTreeFlashLSONode);
-};
+};*/
 
 // CookiesTreeModel -----------------------------------------------------------
@@ -771,5 +772,5 @@ class CookiesTreeModel : public ui::TreeNodeModel<CookieTreeNode> {
   void PopulateServiceWorkerUsageInfo(LocalDataContainer* container);
   void PopulateCacheStorageUsageInfo(LocalDataContainer* container);
-  void PopulateFlashLSOInfo(LocalDataContainer* container);
+  //void PopulateFlashLSOInfo(LocalDataContainer* container);
 
   BrowsingDataCookieHelper* GetCookieHelper(const std::string& app_id);
@@ -845,7 +846,7 @@ class CookiesTreeModel : public ui::TreeNodeModel<CookieTreeNode> {
       ScopedBatchUpdateNotifier* notifier,
       const base::string16& filter);
-  void PopulateFlashLSOInfoWithFilter(LocalDataContainer* container,
+  /*void PopulateFlashLSOInfoWithFilter(LocalDataContainer* container,
                                       ScopedBatchUpdateNotifier* notifier,
-                                      const base::string16& filter);
+                                      const base::string16& filter);*/
 
 #if defined(ENABLE_EXTENSIONS)
diff --git a/chrome/browser/browsing_data/local_data_container.cc b/chrome/browser/browsing_data/local_data_container.cc
index d1189dc..25338c7 100644
--- a/chrome/browser/browsing_data/local_data_container.cc
+++ b/chrome/browser/browsing_data/local_data_container.cc
@@ -8,5 +8,5 @@
 #include "base/memory/linked_ptr.h"
 #include "chrome/browser/browsing_data/browsing_data_channel_id_helper.h"
-#include "chrome/browser/browsing_data/browsing_data_flash_lso_helper.h"
+//#include "chrome/browser/browsing_data/browsing_data_flash_lso_helper.h"
 #include "chrome/browser/browsing_data/cookies_tree_model.h"
 #include "net/cookies/canonical_cookie.h"
@@ -26,6 +26,7 @@ LocalDataContainer::LocalDataContainer(
     BrowsingDataChannelIDHelper* channel_id_helper,
     BrowsingDataServiceWorkerHelper* service_worker_helper,
-    BrowsingDataCacheStorageHelper* cache_storage_helper,
-    BrowsingDataFlashLSOHelper* flash_lso_helper)
+    BrowsingDataCacheStorageHelper* cache_storage_helper
+//    BrowsingDataFlashLSOHelper* flash_lso_helper
+    )
     : appcache_helper_(appcache_helper),
       cookie_helper_(cookie_helper),
@@ -39,5 +40,5 @@ LocalDataContainer::LocalDataContainer(
       service_worker_helper_(service_worker_helper),
       cache_storage_helper_(cache_storage_helper),
-      flash_lso_helper_(flash_lso_helper),
+      //flash_lso_helper_(flash_lso_helper),
       weak_ptr_factory_(this) {}
 
@@ -126,4 +127,5 @@ void LocalDataContainer::Init(CookiesTreeModel* model) {
   }
 
+  /*
   if (flash_lso_helper_.get()) {
     batches_started_++;
@@ -131,5 +133,5 @@ void LocalDataContainer::Init(CookiesTreeModel* model) {
         base::Bind(&LocalDataContainer::OnFlashLSOInfoLoaded,
                    weak_ptr_factory_.GetWeakPtr()));
-  }
+  }*/
 
   model_->SetBatchExpectation(batches_started_, true);
@@ -229,8 +231,8 @@ void LocalDataContainer::OnCacheStorageModelInfoLoaded(
 }
 
-void LocalDataContainer::OnFlashLSOInfoLoaded(
+/*void LocalDataContainer::OnFlashLSOInfoLoaded(
     const FlashLSODomainList& domains) {
   flash_lso_domain_list_ = domains;
   DCHECK(model_);
   model_->PopulateFlashLSOInfo(this);
-}
+}*/
diff --git a/chrome/browser/browsing_data/local_data_container.h b/chrome/browser/browsing_data/local_data_container.h
index d78fb85..fa43da9 100644
--- a/chrome/browser/browsing_data/local_data_container.h
+++ b/chrome/browser/browsing_data/local_data_container.h
@@ -27,5 +27,5 @@
 #include "net/ssl/channel_id_store.h"
 
-class BrowsingDataFlashLSOHelper;
+//class BrowsingDataFlashLSOHelper;
 class CookiesTreeModel;
 class LocalDataContainer;
@@ -53,5 +53,5 @@ typedef std::list<content::ServiceWorkerUsageInfo> ServiceWorkerUsageInfoList;
 typedef std::list<content::CacheStorageUsageInfo> CacheStorageUsageInfoList;
 typedef std::map<GURL, std::list<content::AppCacheInfo> > AppCacheInfoMap;
-typedef std::vector<std::string> FlashLSODomainList;
+//typedef std::vector<std::string> FlashLSODomainList;
 
 }  // namespace
@@ -75,6 +75,7 @@ class LocalDataContainer {
                      BrowsingDataChannelIDHelper* channel_id_helper,
                      BrowsingDataServiceWorkerHelper* service_worker_helper,
-                     BrowsingDataCacheStorageHelper* cache_storage_helper,
-                     BrowsingDataFlashLSOHelper* flash_data_helper);
+                     BrowsingDataCacheStorageHelper* cache_storage_helper
+//                     BrowsingDataFlashLSOHelper* flash_data_helper
+                     );
   virtual ~LocalDataContainer();
 
@@ -96,5 +97,5 @@ class LocalDataContainer {
   friend class CookieTreeServiceWorkerNode;
   friend class CookieTreeCacheStorageNode;
-  friend class CookieTreeFlashLSONode;
+  //friend class CookieTreeFlashLSONode;
 
   // Callback methods to be invoked when fetching the data is complete.
@@ -117,5 +118,5 @@ class LocalDataContainer {
   void OnCacheStorageModelInfoLoaded(
       const CacheStorageUsageInfoList& cache_storage_info);
-  void OnFlashLSOInfoLoaded(const FlashLSODomainList& domains);
+  //void OnFlashLSOInfoLoaded(const FlashLSODomainList& domains);
 
   // Pointers to the helper objects, needed to retreive all the types of locally
@@ -132,5 +133,5 @@ class LocalDataContainer {
   scoped_refptr<BrowsingDataServiceWorkerHelper> service_worker_helper_;
   scoped_refptr<BrowsingDataCacheStorageHelper> cache_storage_helper_;
-  scoped_refptr<BrowsingDataFlashLSOHelper> flash_lso_helper_;
+  //scoped_refptr<BrowsingDataFlashLSOHelper> flash_lso_helper_;
 
   // Storage for all the data that was retrieved through the helper objects.
@@ -147,5 +148,5 @@ class LocalDataContainer {
   ServiceWorkerUsageInfoList service_worker_info_list_;
   CacheStorageUsageInfoList cache_storage_info_list_;
-  FlashLSODomainList flash_lso_domain_list_;
+  //FlashLSODomainList flash_lso_domain_list_;
 
   // A delegate, which must outlive this object. The update callbacks use the
diff --git a/chrome/browser/browsing_data/site_data_size_collector.cc b/chrome/browser/browsing_data/site_data_size_collector.cc
index 215a969..e89c5ad 100644
--- a/chrome/browser/browsing_data/site_data_size_collector.cc
+++ b/chrome/browser/browsing_data/site_data_size_collector.cc
@@ -31,6 +31,7 @@ SiteDataSizeCollector::SiteDataSizeCollector(
     BrowsingDataChannelIDHelper* channel_id_helper,
     BrowsingDataServiceWorkerHelper* service_worker_helper,
-    BrowsingDataCacheStorageHelper* cache_storage_helper,
-    BrowsingDataFlashLSOHelper* flash_lso_helper)
+    BrowsingDataCacheStorageHelper* cache_storage_helper
+    //BrowsingDataFlashLSOHelper* flash_lso_helper
+    )
     : default_storage_partition_path_(default_storage_partition_path),
       appcache_helper_(appcache_helper),
@@ -43,5 +44,5 @@ SiteDataSizeCollector::SiteDataSizeCollector(
       service_worker_helper_(service_worker_helper),
       cache_storage_helper_(cache_storage_helper),
-      flash_lso_helper_(flash_lso_helper),
+      //flash_lso_helper_(flash_lso_helper),
       in_flight_operations_(0),
       total_bytes_(0),
@@ -113,10 +114,10 @@ void SiteDataSizeCollector::Fetch(const FetchCallback& callback) {
     in_flight_operations_++;
   }
-  if (flash_lso_helper_.get()) {
+  /*if (flash_lso_helper_.get()) {
     flash_lso_helper_->StartFetching(
         base::Bind(&SiteDataSizeCollector::OnFlashLSOInfoLoaded,
                    weak_ptr_factory_.GetWeakPtr()));
     in_flight_operations_++;
-  }
+  }*/
   // TODO(fukino): SITE_USAGE_DATA and WEB_APP_DATA should be counted too.
   // All data types included in REMOVE_SITE_USAGE_DATA should be counted.
@@ -228,5 +229,5 @@ void SiteDataSizeCollector::OnCacheStorageModelInfoLoaded(
 }
 
-void SiteDataSizeCollector::OnFlashLSOInfoLoaded(
+/*void SiteDataSizeCollector::OnFlashLSOInfoLoaded(
     const FlashLSODomainList& domains) {
   DCHECK_CURRENTLY_ON(content::BrowserThread::UI);
@@ -246,5 +247,5 @@ void SiteDataSizeCollector::OnFlashLSOInfoLoaded(
       base::Bind(&SiteDataSizeCollector::OnStorageSizeFetched,
                  weak_ptr_factory_.GetWeakPtr()));
-}
+}*/
 
 void SiteDataSizeCollector::OnStorageSizeFetched(int64_t size) {
diff --git a/chrome/browser/browsing_data/site_data_size_collector.h b/chrome/browser/browsing_data/site_data_size_collector.h
index 03c71a9..7d57c63 100644
--- a/chrome/browser/browsing_data/site_data_size_collector.h
+++ b/chrome/browser/browsing_data/site_data_size_collector.h
@@ -13,5 +13,5 @@
 #include "chrome/browser/browsing_data/browsing_data_database_helper.h"
 #include "chrome/browser/browsing_data/browsing_data_file_system_helper.h"
-#include "chrome/browser/browsing_data/browsing_data_flash_lso_helper.h"
+//#include "chrome/browser/browsing_data/browsing_data_flash_lso_helper.h"
 #include "chrome/browser/browsing_data/browsing_data_indexed_db_helper.h"
 #include "chrome/browser/browsing_data/browsing_data_local_storage_helper.h"
@@ -34,5 +34,5 @@ typedef std::list<content::ServiceWorkerUsageInfo> ServiceWorkerUsageInfoList;
 typedef std::list<content::CacheStorageUsageInfo> CacheStorageUsageInfoList;
 typedef std::map<GURL, std::list<content::AppCacheInfo> > AppCacheInfoMap;
-typedef std::vector<std::string> FlashLSODomainList;
+//typedef std::vector<std::string> FlashLSODomainList;
 
 }  // namespace
@@ -49,6 +49,7 @@ class SiteDataSizeCollector {
                         BrowsingDataChannelIDHelper* channel_id_helper,
                         BrowsingDataServiceWorkerHelper* service_worker_helper,
-                        BrowsingDataCacheStorageHelper* cache_storage_helper,
-                        BrowsingDataFlashLSOHelper* flash_lso_helper);
+                        BrowsingDataCacheStorageHelper* cache_storage_helper
+                        //BrowsingDataFlashLSOHelper* flash_lso_helper
+                        );
   virtual ~SiteDataSizeCollector();
 
@@ -75,5 +76,5 @@ class SiteDataSizeCollector {
   void OnCacheStorageModelInfoLoaded(
       const CacheStorageUsageInfoList& cache_storage_info_list);
-  void OnFlashLSOInfoLoaded(const FlashLSODomainList& domains);
+  //void OnFlashLSOInfoLoaded(const FlashLSODomainList& domains);
 
   // Callback for when the size is fetched from each storage backend.
@@ -94,5 +95,5 @@ class SiteDataSizeCollector {
   scoped_refptr<BrowsingDataServiceWorkerHelper> service_worker_helper_;
   scoped_refptr<BrowsingDataCacheStorageHelper> cache_storage_helper_;
-  scoped_refptr<BrowsingDataFlashLSOHelper> flash_lso_helper_;
+  //scoped_refptr<BrowsingDataFlashLSOHelper> flash_lso_helper_;
 
   // Callback called when sizes of all site data are fetched and accumulated.
diff --git a/chrome/browser/BUILD.gn b/chrome/browser/BUILD.gn
index 47813be..63fede1 100644
--- a/chrome/browser/BUILD.gn
+++ b/chrome/browser/BUILD.gn
@@ -267,5 +267,5 @@ split_static_library("browser") {
     "//third_party/smhasher:cityhash",
     "//third_party/webrtc/modules/desktop_capture",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//third_party/zlib",
     "//third_party/zlib:compression_utils",
diff --git a/chrome/browser/chrome_browser_main.cc b/chrome/browser/chrome_browser_main.cc
index 1825228..4b58988 100644
--- a/chrome/browser/chrome_browser_main.cc
+++ b/chrome/browser/chrome_browser_main.cc
@@ -59,5 +59,5 @@
 #include "chrome/browser/component_updater/file_type_policies_component_installer.h"
 #include "chrome/browser/component_updater/origin_trials_component_installer.h"
-#include "chrome/browser/component_updater/pepper_flash_component_installer.h"
+//#include "chrome/browser/component_updater/pepper_flash_component_installer.h"
 #include "chrome/browser/component_updater/recovery_component_installer.h"
 #include "chrome/browser/component_updater/sth_set_component_installer.h"
@@ -65,5 +65,5 @@
 #include "chrome/browser/component_updater/supervised_user_whitelist_installer.h"
 #include "chrome/browser/component_updater/swiftshader_component_installer.h"
-#include "chrome/browser/component_updater/widevine_cdm_component_installer.h"
+//#include "chrome/browser/component_updater/widevine_cdm_component_installer.h"
 #include "chrome/browser/defaults.h"
 #include "chrome/browser/first_run/first_run.h"
@@ -616,7 +616,7 @@ void RegisterComponentsForUpdate() {
 #if !defined(OS_CHROMEOS) && !defined(OS_ANDROID)
   RegisterRecoveryComponent(cus, g_browser_process->local_state());
-  RegisterPepperFlashComponent(cus);
+  //RegisterPepperFlashComponent(cus);
   RegisterSwiftShaderComponent(cus);
-  RegisterWidevineCdmComponent(cus);
+  //RegisterWidevineCdmComponent(cus);
 #endif  // !defined(OS_CHROMEOS) && !defined(OS_ANDROID)
 
diff --git a/chrome/browser/chrome_content_browser_client.cc b/chrome/browser/chrome_content_browser_client.cc
index d5313df..07cb187 100644
--- a/chrome/browser/chrome_content_browser_client.cc
+++ b/chrome/browser/chrome_content_browser_client.cc
@@ -69,5 +69,5 @@
 #include "chrome/browser/profiles/profile_io_data.h"
 #include "chrome/browser/renderer_host/chrome_render_message_filter.h"
-#include "chrome/browser/renderer_host/pepper/chrome_browser_pepper_host_factory.h"
+//#include "chrome/browser/renderer_host/pepper/chrome_browser_pepper_host_factory.h"
 #include "chrome/browser/safe_browsing/safe_browsing_service.h"
 #include "chrome/browser/safe_browsing/ui_manager.h"
diff --git a/chrome/browser/content_settings/local_shared_objects_container.cc b/chrome/browser/content_settings/local_shared_objects_container.cc
index d82aa46..b3bacee 100644
--- a/chrome/browser/content_settings/local_shared_objects_container.cc
+++ b/chrome/browser/content_settings/local_shared_objects_container.cc
@@ -223,5 +223,6 @@ LocalSharedObjectsContainer::CreateCookiesTreeModel() const {
       cookies(), databases(), local_storages(), session_storages(), appcaches(),
       indexed_dbs(), file_systems(), nullptr, channel_ids(), service_workers(),
-      cache_storages(), nullptr);
+      cache_storages()//, nullptr
+      );
 
   return base::WrapUnique(new CookiesTreeModel(container, nullptr));
diff --git a/chrome/browser/extensions/api/browsing_data/browsing_data_api.cc b/chrome/browser/extensions/api/browsing_data/browsing_data_api.cc
index f32aa58..6411186 100644
--- a/chrome/browser/extensions/api/browsing_data/browsing_data_api.cc
+++ b/chrome/browser/extensions/api/browsing_data/browsing_data_api.cc
@@ -286,4 +286,5 @@ bool BrowsingDataRemoverFunction::RunAsync() {
     // If we're being asked to remove plugin data, check whether it's actually
     // supported.
+    /*
     BrowserThread::PostTask(
         BrowserThread::FILE,
@@ -293,4 +294,5 @@ bool BrowsingDataRemoverFunction::RunAsync() {
             this,
             PluginPrefs::GetForProfile(GetProfile())));
+            */
   } else {
     StartRemoving();
@@ -305,5 +307,5 @@ BrowsingDataRemoverFunction::~BrowsingDataRemoverFunction() {}
 void BrowsingDataRemoverFunction::CheckRemovingPluginDataSupported(
     scoped_refptr<PluginPrefs> plugin_prefs) {
-  if (!PluginDataRemoverHelper::IsSupported(plugin_prefs.get()))
+//  if (!PluginDataRemoverHelper::IsSupported(plugin_prefs.get()))
     removal_mask_ &= ~BrowsingDataRemover::REMOVE_PLUGIN_DATA;
 
diff --git a/chrome/browser/extensions/api/content_settings/content_settings_api.cc b/chrome/browser/extensions/api/content_settings/content_settings_api.cc
index 75351e8..2ea22db 100644
--- a/chrome/browser/extensions/api/content_settings/content_settings_api.cc
+++ b/chrome/browser/extensions/api/content_settings/content_settings_api.cc
@@ -37,5 +37,5 @@
 
 using content::BrowserThread;
-using content::PluginService;
+//using content::PluginService;
 
 namespace Clear = extensions::api::content_settings::ContentSetting::Clear;
@@ -288,4 +288,5 @@ bool ContentSettingsContentSettingSetFunction::RunSync() {
 }
 
+
 bool ContentSettingsContentSettingGetResourceIdentifiersFunction::RunAsync() {
   ContentSettingsType content_type;
@@ -297,11 +298,11 @@ bool ContentSettingsContentSettingGetResourceIdentifiersFunction::RunAsync() {
   }
 
-  PluginService::GetInstance()->GetPlugins(
+/*  PluginService::GetInstance()->GetPlugins(
       base::Bind(&ContentSettingsContentSettingGetResourceIdentifiersFunction::
                  OnGotPlugins,
-                 this));
+                 this));*/
   return true;
 }
-
+/*
 void ContentSettingsContentSettingGetResourceIdentifiersFunction::OnGotPlugins(
     const std::vector<content::WebPluginInfo>& plugins) {
@@ -330,5 +331,5 @@ void ContentSettingsContentSettingGetResourceIdentifiersFunction::OnGotPlugins(
           this,
           true));
-}
+}*/
 
 }  // namespace extensions
diff --git a/chrome/browser/extensions/api/content_settings/content_settings_api.h b/chrome/browser/extensions/api/content_settings/content_settings_api.h
index a4706d1..1b2fbcf 100644
--- a/chrome/browser/extensions/api/content_settings/content_settings_api.h
+++ b/chrome/browser/extensions/api/content_settings/content_settings_api.h
@@ -71,5 +71,5 @@ class ContentSettingsContentSettingGetResourceIdentifiersFunction
   // Callback method that gets executed when |plugins|
   // are asynchronously fetched.
-  void OnGotPlugins(const std::vector<content::WebPluginInfo>& plugins);
+//  void OnGotPlugins(const std::vector<content::WebPluginInfo>& plugins);
 };
 
diff --git a/chrome/browser/extensions/api/image_writer_private/image_writer_private_api.cc b/chrome/browser/extensions/api/image_writer_private/image_writer_private_api.cc
index 1e39db9..d4a999f 100644
--- a/chrome/browser/extensions/api/image_writer_private/image_writer_private_api.cc
+++ b/chrome/browser/extensions/api/image_writer_private/image_writer_private_api.cc
@@ -167,12 +167,12 @@ ImageWriterPrivateListRemovableStorageDevicesFunction::
 
 bool ImageWriterPrivateListRemovableStorageDevicesFunction::RunAsync() {
-  RemovableStorageProvider::GetAllDevices(
+/*  RemovableStorageProvider::GetAllDevices(
     base::Bind(
       &ImageWriterPrivateListRemovableStorageDevicesFunction::OnDeviceListReady,
-      this));
+      this));*/
   return true;
 }
 
-void ImageWriterPrivateListRemovableStorageDevicesFunction::OnDeviceListReady(
+/*void ImageWriterPrivateListRemovableStorageDevicesFunction::OnDeviceListReady(
     scoped_refptr<StorageDeviceList> device_list,
     bool success) {
@@ -185,5 +185,5 @@ void ImageWriterPrivateListRemovableStorageDevicesFunction::OnDeviceListReady(
     SendResponse(false);
   }
-}
+}*/
 
 }  // namespace extensions
diff --git a/chrome/browser/extensions/api/image_writer_private/image_writer_private_api.h b/chrome/browser/extensions/api/image_writer_private/image_writer_private_api.h
index a7abf44..63dd90f 100644
--- a/chrome/browser/extensions/api/image_writer_private/image_writer_private_api.h
+++ b/chrome/browser/extensions/api/image_writer_private/image_writer_private_api.h
@@ -5,5 +5,5 @@
 #define CHROME_BROWSER_EXTENSIONS_API_IMAGE_WRITER_PRIVATE_IMAGE_WRITER_PRIVATE_API_H_
 
-#include "chrome/browser/extensions/api/image_writer_private/removable_storage_provider.h"
+//#include "chrome/browser/extensions/api/image_writer_private/removable_storage_provider.h"
 #include "chrome/browser/extensions/chrome_extension_function.h"
 #include "chrome/common/extensions/api/image_writer_private.h"
@@ -73,6 +73,6 @@ class ImageWriterPrivateListRemovableStorageDevicesFunction
   ~ImageWriterPrivateListRemovableStorageDevicesFunction() override;
   bool RunAsync() override;
-  void OnDeviceListReady(scoped_refptr<StorageDeviceList> device_list,
-                         bool success);
+  //void OnDeviceListReady(scoped_refptr<StorageDeviceList> device_list,
+//                         bool success);
 };
 
diff --git a/chrome/browser/extensions/api/image_writer_private/image_writer_private_apitest.cc b/chrome/browser/extensions/api/image_writer_private/image_writer_private_apitest.cc
index f0af83d..d7d96dd 100644
--- a/chrome/browser/extensions/api/image_writer_private/image_writer_private_apitest.cc
+++ b/chrome/browser/extensions/api/image_writer_private/image_writer_private_apitest.cc
@@ -7,5 +7,5 @@
 #include "chrome/browser/extensions/api/file_system/file_system_api.h"
 #include "chrome/browser/extensions/api/image_writer_private/operation.h"
-#include "chrome/browser/extensions/api/image_writer_private/removable_storage_provider.h"
+//#include "chrome/browser/extensions/api/image_writer_private/removable_storage_provider.h"
 #include "chrome/browser/extensions/api/image_writer_private/test_utils.h"
 #include "chrome/browser/extensions/extension_apitest.h"
diff --git a/chrome/browser/extensions/api/resources_private/resources_private_api.cc b/chrome/browser/extensions/api/resources_private/resources_private_api.cc
index 37a7fa3..880a274 100644
--- a/chrome/browser/extensions/api/resources_private/resources_private_api.cc
+++ b/chrome/browser/extensions/api/resources_private/resources_private_api.cc
@@ -35,5 +35,5 @@ void AddStringsForIdentity(base::DictionaryValue* dict) {
 }
 
-void AddStringsForPdf(base::DictionaryValue* dict) {
+/*void AddStringsForPdf(base::DictionaryValue* dict) {
   SetL10nString(dict, "passwordPrompt", IDS_PDF_NEED_PASSWORD);
   SetL10nString(dict, "passwordSubmit", IDS_PDF_PASSWORD_SUBMIT);
@@ -51,5 +51,5 @@ void AddStringsForPdf(base::DictionaryValue* dict) {
   SetL10nString(dict, "tooltipZoomIn", IDS_PDF_TOOLTIP_ZOOM_IN);
   SetL10nString(dict, "tooltipZoomOut", IDS_PDF_TOOLTIP_ZOOM_OUT);
-}
+}*/
 
 }  // namespace
@@ -72,7 +72,7 @@ ExtensionFunction::ResponseAction ResourcesPrivateGetStringsFunction::Run() {
       AddStringsForIdentity(dict.get());
       break;
-    case api::resources_private::COMPONENT_PDF:
+/*    case api::resources_private::COMPONENT_PDF:
       AddStringsForPdf(dict.get());
-      break;
+      break;*/
     case api::resources_private::COMPONENT_NONE:
       NOTREACHED();
diff --git a/chrome/browser/extensions/browser_context_keyed_service_factories.cc b/chrome/browser/extensions/browser_context_keyed_service_factories.cc
index 9b39773..1585e01 100644
--- a/chrome/browser/extensions/browser_context_keyed_service_factories.cc
+++ b/chrome/browser/extensions/browser_context_keyed_service_factories.cc
@@ -22,10 +22,10 @@
 #include "chrome/browser/extensions/api/feedback_private/feedback_private_api.h"
 #include "chrome/browser/extensions/api/font_settings/font_settings_api.h"
-#include "chrome/browser/extensions/api/gcd_private/gcd_private_api.h"
+//#include "chrome/browser/extensions/api/gcd_private/gcd_private_api.h"
 #include "chrome/browser/extensions/api/history/history_api.h"
 #include "chrome/browser/extensions/api/hotword_private/hotword_private_api.h"
 #include "chrome/browser/extensions/api/identity/identity_api.h"
 #include "chrome/browser/extensions/api/language_settings_private/language_settings_private_delegate_factory.h"
-#include "chrome/browser/extensions/api/mdns/mdns_api.h"
+//#include "chrome/browser/extensions/api/mdns/mdns_api.h"
 #include "chrome/browser/extensions/api/omnibox/omnibox_api.h"
 #include "chrome/browser/extensions/api/passwords_private/passwords_private_event_router_factory.h"
@@ -95,5 +95,5 @@ void EnsureBrowserContextKeyedServiceFactoriesBuilt() {
   extensions::FeedbackPrivateAPI::GetFactoryInstance();
   extensions::FontSettingsAPI::GetFactoryInstance();
-  extensions::GcdPrivateAPI::GetFactoryInstance();
+//  extensions::GcdPrivateAPI::GetFactoryInstance();
   extensions::HistoryAPI::GetFactoryInstance();
   extensions::HotwordPrivateEventService::GetFactoryInstance();
@@ -111,5 +111,5 @@ void EnsureBrowserContextKeyedServiceFactoriesBuilt() {
   extensions::LogPrivateAPI::GetFactoryInstance();
 #endif
-  extensions::MDnsAPI::GetFactoryInstance();
+//  extensions::MDnsAPI::GetFactoryInstance();
 #if defined(OS_CHROMEOS)
   extensions::MediaPlayerAPI::GetFactoryInstance();
diff --git a/chrome/browser/extensions/BUILD.gn b/chrome/browser/extensions/BUILD.gn
index 149073c..ce29775 100644
--- a/chrome/browser/extensions/BUILD.gn
+++ b/chrome/browser/extensions/BUILD.gn
@@ -265,9 +265,9 @@ static_library("extensions") {
     "api/image_writer_private/operation_manager.cc",
     "api/image_writer_private/operation_manager.h",
-    "api/image_writer_private/removable_storage_provider.cc",
-    "api/image_writer_private/removable_storage_provider.h",
-    "api/image_writer_private/removable_storage_provider_chromeos.cc",
-    "api/image_writer_private/removable_storage_provider_mac.cc",
-    "api/image_writer_private/removable_storage_provider_win.cc",
+#    "api/image_writer_private/removable_storage_provider.cc",
+#    "api/image_writer_private/removable_storage_provider.h",
+#    "api/image_writer_private/removable_storage_provider_chromeos.cc",
+#    "api/image_writer_private/removable_storage_provider_mac.cc",
+#    "api/image_writer_private/removable_storage_provider_win.cc",
     "api/image_writer_private/write_from_file_operation.cc",
     "api/image_writer_private/write_from_file_operation.h",
@@ -1000,5 +1000,5 @@ static_library("extensions") {
       "api/easy_unlock_private/easy_unlock_private_crypto_delegate_stub.cc",
       "api/image_writer_private/operation_nonchromeos.cc",
-      "api/image_writer_private/removable_storage_provider_linux.cc",
+#      "api/image_writer_private/removable_storage_provider_linux.cc",
       "api/messaging/native_message_process_host.cc",
       "api/messaging/native_message_process_host.h",
diff --git a/chrome/browser/extensions/component_extensions_whitelist/whitelist.cc b/chrome/browser/extensions/component_extensions_whitelist/whitelist.cc
index ca4d2cf..5ae9d30 100644
--- a/chrome/browser/extensions/component_extensions_whitelist/whitelist.cc
+++ b/chrome/browser/extensions/component_extensions_whitelist/whitelist.cc
@@ -74,5 +74,5 @@ bool IsComponentExtensionWhitelisted(int manifest_resource_id) {
     case IDR_CHROME_APP_MANIFEST:
 #endif
-    case IDR_CLOUDPRINT_MANIFEST:
+//    case IDR_CLOUDPRINT_MANIFEST:
     case IDR_CRYPTOTOKEN_MANIFEST:
     case IDR_FEEDBACK_MANIFEST:
diff --git a/chrome/browser/extensions/component_loader.cc b/chrome/browser/extensions/component_loader.cc
index df0daf5..8a0557e 100644
--- a/chrome/browser/extensions/component_loader.cc
+++ b/chrome/browser/extensions/component_loader.cc
@@ -510,6 +510,6 @@ void ComponentLoader::AddDefaultComponentExtensions(
       base::FilePath(FILE_PATH_LITERAL("bookmark_manager")));
   // Cloud Print component app. Not required on Chrome OS.
-  Add(IDR_CLOUDPRINT_MANIFEST,
-      base::FilePath(FILE_PATH_LITERAL("cloud_print")));
+//  Add(IDR_CLOUDPRINT_MANIFEST,
+//      base::FilePath(FILE_PATH_LITERAL("cloud_print")));
 #endif
 
diff --git a/chrome/browser/extensions/plugin_manager.cc b/chrome/browser/extensions/plugin_manager.cc
index 57cd72a..4fa88a7 100644
--- a/chrome/browser/extensions/plugin_manager.cc
+++ b/chrome/browser/extensions/plugin_manager.cc
@@ -14,5 +14,5 @@
 #include "chrome/common/extensions/api/plugins/plugins_handler.h"
 #include "content/public/browser/plugin_service.h"
-#include "content/public/common/pepper_plugin_info.h"
+//#include "content/public/common/pepper_plugin_info.h"
 #include "extensions/browser/extension_registry.h"
 #include "extensions/common/extension.h"
@@ -145,5 +145,6 @@ void PluginManager::UpdatePluginListWithNaClModules() {
   if (!PathService::Get(chrome::FILE_NACL_PLUGIN, &path))
     return;
-  const content::PepperPluginInfo* pepper_info =
+  return;
+/*  const content::PepperPluginInfo* pepper_info =
       PluginService::GetInstance()->GetRegisteredPpapiPluginInfo(path);
   if (!pepper_info)
@@ -182,5 +183,5 @@ void PluginManager::UpdatePluginListWithNaClModules() {
       break;
     }
-  }
+  }*/
 }
 
diff --git a/chrome/browser/load_library_perf_test.cc b/chrome/browser/load_library_perf_test.cc
index 3b49e6a..ba4ad3d 100644
--- a/chrome/browser/load_library_perf_test.cc
+++ b/chrome/browser/load_library_perf_test.cc
@@ -17,5 +17,5 @@
 #include "testing/perf/perf_test.h"
 
-#include "widevine_cdm_version.h"  //  In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h"  //  In SHARED_INTERMEDIATE_DIR.
 
 #if defined(ENABLE_PEPPER_CDMS)
diff --git a/chrome/browser/pdf/pdf_extension_util.cc b/chrome/browser/pdf/pdf_extension_util.cc
index 774bdcf..59895bc 100644
--- a/chrome/browser/pdf/pdf_extension_util.cc
+++ b/chrome/browser/pdf/pdf_extension_util.cc
@@ -28,4 +28,5 @@ const char kPdfResourceIdentifier[] = "chromium-pdf";
 
 std::string GetManifest() {
+#if defined(ENABLE_PLUGINS)
   std::string manifest_contents =
       ResourceBundle::GetSharedInstance().GetRawDataResource(
@@ -36,4 +37,7 @@ std::string GetManifest() {
 
   return manifest_contents;
+#else
+  return NULL;
+#endif
 }
 
diff --git a/chrome/browser/prefs/browser_prefs.cc b/chrome/browser/prefs/browser_prefs.cc
index c3d1343..e876cf3 100644
--- a/chrome/browser/prefs/browser_prefs.cc
+++ b/chrome/browser/prefs/browser_prefs.cc
@@ -37,5 +37,5 @@
 #include "chrome/browser/notifications/extension_welcome_notification.h"
 #include "chrome/browser/notifications/notifier_state_tracker.h"
-#include "chrome/browser/pepper_flash_settings_manager.h"
+//#include "chrome/browser/pepper_flash_settings_manager.h"
 #include "chrome/browser/plugins/plugin_finder.h"
 #include "chrome/browser/prefs/chrome_pref_service_factory.h"
@@ -49,5 +49,5 @@
 #include "chrome/browser/profiles/profiles_state.h"
 #include "chrome/browser/push_messaging/push_messaging_app_identifier.h"
-#include "chrome/browser/renderer_host/pepper/device_id_fetcher.h"
+//#include "chrome/browser/renderer_host/pepper/device_id_fetcher.h"
 #include "chrome/browser/search/search.h"
 #include "chrome/browser/signin/signin_manager_factory.h"
@@ -542,5 +542,5 @@ void RegisterProfilePrefs(user_prefs::PrefRegistrySyncable* registry) {
 #else
   AppShortcutManager::RegisterProfilePrefs(registry);
-  DeviceIDFetcher::RegisterProfilePrefs(registry);
+//  DeviceIDFetcher::RegisterProfilePrefs(registry);
   DevToolsWindow::RegisterProfilePrefs(registry);
 #if defined(ENABLE_APP_LIST)
@@ -552,5 +552,5 @@ void RegisterProfilePrefs(user_prefs::PrefRegistrySyncable* registry) {
   first_run::RegisterProfilePrefs(registry);
   NewTabUI::RegisterProfilePrefs(registry);
-  PepperFlashSettingsManager::RegisterProfilePrefs(registry);
+  //PepperFlashSettingsManager::RegisterProfilePrefs(registry);
   PinnedTabCodec::RegisterProfilePrefs(registry);
   signin::RegisterProfilePrefs(registry);
diff --git a/chrome/browser/printing/print_view_manager.cc b/chrome/browser/printing/print_view_manager.cc
index c09c632..0ecb964 100644
--- a/chrome/browser/printing/print_view_manager.cc
+++ b/chrome/browser/printing/print_view_manager.cc
@@ -32,4 +32,5 @@ base::LazyInstance<std::map<content::RenderProcessHost*, base::Closure>>
     g_scripted_print_preview_closure_map = LAZY_INSTANCE_INITIALIZER;
 
+#if defined(ENABLE_BASIC_PRINTING)
 void EnableInternalPDFPluginForContents(int render_process_id,
                                         int render_frame_id) {
@@ -47,4 +48,5 @@ void EnableInternalPDFPluginForContents(int render_process_id,
       render_process_id, render_frame_id, GURL(), pdf_plugin);
 }
+#endif
 
 }  // namespace
@@ -57,7 +59,9 @@ PrintViewManager::PrintViewManager(content::WebContents* web_contents)
       scripted_print_preview_rph_(nullptr) {
   if (PrintPreviewDialogController::IsPrintPreviewDialog(web_contents)) {
+#if defined(ENABLE_BASIC_PRINTING)
     EnableInternalPDFPluginForContents(
         web_contents->GetRenderProcessHost()->GetID(),
         web_contents->GetMainFrame()->GetRoutingID());
+#endif
   }
 }
@@ -137,6 +141,8 @@ void PrintViewManager::RenderFrameCreated(
     content::RenderFrameHost* render_frame_host) {
   if (PrintPreviewDialogController::IsPrintPreviewDialog(web_contents())) {
+#if defined(ENABLE_BASIC_PRINTING)
     EnableInternalPDFPluginForContents(render_frame_host->GetProcess()->GetID(),
                                        render_frame_host->GetRoutingID());
+#endif
   }
 }
diff --git a/chrome/browser/resources/options/clear_browser_data_overlay.html b/chrome/browser/resources/options/clear_browser_data_overlay.html
index 3c8efde..3fb63f7 100644
--- a/chrome/browser/resources/options/clear_browser_data_overlay.html
+++ b/chrome/browser/resources/options/clear_browser_data_overlay.html
@@ -36,6 +36,4 @@
           <input id="delete-cookies-checkbox"
               pref="browser.clear_data.cookies" type="checkbox">
-          <span i18n-content="deleteCookiesFlashCheckbox"
-              class="clear-plugin-lso-data-enabled"></span>
           <span i18n-content="deleteCookiesCheckbox"
               class="clear-plugin-lso-data-disabled"></span>
@@ -98,8 +96,4 @@
       </div>
     </div>
-    <div id="flash-storage-settings" class="flash-plugin-area">
-      <a target="_blank" i18n-content="flashStorageSettings"
-          i18n-values="href:flashStorageUrl"></a>
-    </div>
   </div>
   <div class="action-area">
diff --git a/chrome/browser/resources/options/clear_browser_data_overlay.js b/chrome/browser/resources/options/clear_browser_data_overlay.js
index 092353e..82e9701 100644
--- a/chrome/browser/resources/options/clear_browser_data_overlay.js
+++ b/chrome/browser/resources/options/clear_browser_data_overlay.js
@@ -168,5 +168,4 @@ cr.define('options', function() {
       $('clear-browser-data-old-learn-more-link').hidden = simple;
       $('clear-browser-data-footer-learn-more-link').hidden = !simple;
-      $('flash-storage-settings').hidden = simple;
       $('clear-browser-data-history-footer').hidden = !showHistoryFooter;
     },
diff --git a/chrome/browser/resources/options/content_settings_exceptions_area.html b/chrome/browser/resources/options/content_settings_exceptions_area.html
index 4a16f4c..19e4f45 100644
--- a/chrome/browser/resources/options/content_settings_exceptions_area.html
+++ b/chrome/browser/resources/options/content_settings_exceptions_area.html
@@ -26,9 +26,4 @@
         <list mode="otr"></list>
       </div>
-      <div class="flash-plugin-area">
-        <a i18n-values="href:flashStorageUrl" target="_blank"
-            i18n-content="flashStorageSettings">
-        </a>
-      </div>
     </div>
     <div contentType="images">
@@ -101,9 +96,4 @@
         <list mode="otr"></list>
       </div>
-      <div id="media-pepper-flash-exceptions-mic" class="pepper-flash-settings">
-        <span i18n-content="mediaPepperFlashMicExceptionsDivergedLabel"></span>
-        <a target="_blank" i18n-content="mediaPepperFlashChangeLink"
-            i18n-values="href:mediaPepperFlashWebsitePrivacyURL"></a>
-      </div>
     </div>
     <div contentType="media-stream-camera">
@@ -114,11 +104,4 @@
         <list mode="otr"></list>
       </div>
-      <div id="media-pepper-flash-exceptions-camera"
-          class="pepper-flash-settings">
-        <span i18n-content="mediaPepperFlashCameraExceptionsDivergedLabel">
-        </span>
-        <a target="_blank" i18n-content="mediaPepperFlashChangeLink"
-            i18n-values="href:mediaPepperFlashWebsitePrivacyURL"></a>
-      </div>
     </div>
     <div contentType="ppapi-broker">
diff --git a/chrome/browser/resources/options/content_settings.html b/chrome/browser/resources/options/content_settings.html
index 85659d6..b4e20ec 100644
--- a/chrome/browser/resources/options/content_settings.html
+++ b/chrome/browser/resources/options/content_settings.html
@@ -396,9 +396,4 @@
               i18n-content="manageExceptions"></button>
         </div>
-        <div id="media-pepper-flash-default-mic" class="pepper-flash-settings">
-          <span i18n-content="mediaPepperFlashMicDefaultDivergedLabel"></span>
-          <a target="_blank" i18n-content="mediaPepperFlashChangeLink"
-              i18n-values="href:mediaPepperFlashGlobalPrivacyURL"></a>
-        </div>
       </div>
     </section>
@@ -436,11 +431,4 @@
           </button>
         </div>
-        <div id="media-pepper-flash-default-camera"
-            class="pepper-flash-settings">
-          <span i18n-content="mediaPepperFlashCameraDefaultDivergedLabel">
-          </span>
-          <a target="_blank" i18n-content="mediaPepperFlashChangeLink"
-              i18n-values="href:mediaPepperFlashGlobalPrivacyURL"></a>
-        </div>
       </div>
     </section>
diff --git a/chrome/browser/resources/options/content_settings.js b/chrome/browser/resources/options/content_settings.js
index edcadaf..737849b 100644
--- a/chrome/browser/resources/options/content_settings.js
+++ b/chrome/browser/resources/options/content_settings.js
@@ -78,8 +78,8 @@ cr.define('options', function() {
           PageManager.closeOverlay.bind(PageManager);
 
-      $('media-pepper-flash-default-mic').hidden = true;
+/*      $('media-pepper-flash-default-mic').hidden = true;
       $('media-pepper-flash-default-camera').hidden = true;
       $('media-pepper-flash-exceptions-mic').hidden = true;
-      $('media-pepper-flash-exceptions-camera').hidden = true;
+      $('media-pepper-flash-exceptions-camera').hidden = true;*/
 
       $('media-select-mic').addEventListener('change',
@@ -199,10 +199,10 @@ cr.define('options', function() {
    * @param {boolean} show Whether to show (or hide) the link.
    */
-  ContentSettings.showMediaPepperFlashLink =
+/*  ContentSettings.showMediaPepperFlashLink =
       function(linkType, contentType, show) {
     assert(['default', 'exceptions'].indexOf(linkType) >= 0);
     assert(['mic', 'camera'].indexOf(contentType) >= 0);
     $('media-pepper-flash-' + linkType + '-' + contentType).hidden = !show;
-  };
+  };*/
 
   /**
diff --git a/chrome/browser/ui/browser.cc b/chrome/browser/ui/browser.cc
index 70ebf85..a54ded3 100644
--- a/chrome/browser/ui/browser.cc
+++ b/chrome/browser/ui/browser.cc
@@ -67,5 +67,5 @@
 #include "chrome/browser/memory/tab_manager_web_contents_data.h"
 #include "chrome/browser/notifications/notification_ui_manager.h"
-#include "chrome/browser/pepper_broker_infobar_delegate.h"
+//#include "chrome/browser/pepper_broker_infobar_delegate.h"
 #include "chrome/browser/permissions/permission_request_manager.h"
 #include "chrome/browser/prefs/incognito_mode_prefs.h"
@@ -1845,5 +1845,5 @@ bool Browser::RequestPpapiBrokerPermission(
     const base::FilePath& plugin_path,
     const base::Callback<void(bool)>& callback) {
-  PepperBrokerInfoBarDelegate::Create(web_contents, url, plugin_path, callback);
+//  PepperBrokerInfoBarDelegate::Create(web_contents, url, plugin_path, callback);
   return true;
 }
diff --git a/chrome/browser/ui/tab_helpers.cc b/chrome/browser/ui/tab_helpers.cc
index be24812..ee159ef 100644
--- a/chrome/browser/ui/tab_helpers.cc
+++ b/chrome/browser/ui/tab_helpers.cc
@@ -207,5 +207,5 @@ void TabHelpers::AttachTabHelpers(WebContents* web_contents) {
       web_contents);
   extensions::WebNavigationTabObserver::CreateForWebContents(web_contents);
-  HungPluginTabHelper::CreateForWebContents(web_contents);
+  //HungPluginTabHelper::CreateForWebContents(web_contents);
   ManagePasswordsUIController::CreateForWebContents(web_contents);
   pdf::PDFWebContentsHelper::CreateForWebContentsWithClient(
@@ -213,5 +213,5 @@ void TabHelpers::AttachTabHelpers(WebContents* web_contents) {
                         new ChromePDFWebContentsHelperClient()));
   PermissionRequestManager::CreateForWebContents(web_contents);
-  PluginObserver::CreateForWebContents(web_contents);
+  //PluginObserver::CreateForWebContents(web_contents);
   SadTabHelper::CreateForWebContents(web_contents);
   safe_browsing::SafeBrowsingTabObserver::CreateForWebContents(web_contents);
diff --git a/chrome/browser/ui/views/tabs/browser_tab_strip_controller.cc b/chrome/browser/ui/views/tabs/browser_tab_strip_controller.cc
index f73984c..69c7fb6 100644
--- a/chrome/browser/ui/views/tabs/browser_tab_strip_controller.cc
+++ b/chrome/browser/ui/views/tabs/browser_tab_strip_controller.cc
@@ -579,12 +579,17 @@ void BrowserTabStripController::OnFindURLMimeTypeCompleted(
   // TODO(bauerb): This possibly uses stale information, but it's guaranteed not
   // to do disk access.
+#if defined(ENABLE_PLUGINS)
   content::WebPluginInfo plugin;
+#endif
   tabstrip_->FileSupported(
       url,
-      mime_type.empty() || mime_util::IsSupportedMimeType(mime_type) ||
-          content::PluginService::GetInstance()->GetPluginInfo(
+      mime_type.empty() || mime_util::IsSupportedMimeType(mime_type)
+#if defined(ENABLE_PLUGINS)
+||          content::PluginService::GetInstance()->GetPluginInfo(
               -1,                // process ID
               MSG_ROUTING_NONE,  // routing ID
               model_->profile()->GetResourceContext(), url, GURL(), mime_type,
-              false, NULL, &plugin, NULL));
+              false, NULL, &plugin, NULL)
+#endif
+);
 }
diff --git a/chrome/browser/ui/webui/chrome_web_ui_controller_factory.cc b/chrome/browser/ui/webui/chrome_web_ui_controller_factory.cc
index ef08db7..736f9ad 100644
--- a/chrome/browser/ui/webui/chrome_web_ui_controller_factory.cc
+++ b/chrome/browser/ui/webui/chrome_web_ui_controller_factory.cc
@@ -792,7 +792,9 @@ base::RefCountedMemory* ChromeWebUIControllerFactory::GetFaviconResourceBytes(
 #endif
 
+#if defined(ENABLE_PLUGINS)
   // Flash is not available on android.
   if (page_url.host() == chrome::kChromeUIFlashHost)
     return FlashUI::GetFaviconResourceBytes(scale_factor);
+#endif
 
   // Android uses the native download manager.
@@ -812,7 +814,9 @@ base::RefCountedMemory* ChromeWebUIControllerFactory::GetFaviconResourceBytes(
 #endif
 
+#if defined(ENABLE_PLUGINS)
   // Android doesn't use the plugins pages.
   if (page_url.host() == chrome::kChromeUIPluginsHost)
     return PluginsUI::GetFaviconResourceBytes(scale_factor);
+#endif
 
 #endif
diff --git a/chrome/browser/ui/webui/cookies_tree_model_util.cc b/chrome/browser/ui/webui/cookies_tree_model_util.cc
index afacc2b..30157f5 100644
--- a/chrome/browser/ui/webui/cookies_tree_model_util.cc
+++ b/chrome/browser/ui/webui/cookies_tree_model_util.cc
@@ -289,5 +289,5 @@ bool CookiesTreeModelUtil::GetCookieTreeNodeDictionary(
       break;
     }
-    case CookieTreeNode::DetailedInfo::TYPE_FLASH_LSO: {
+/*    case CookieTreeNode::DetailedInfo::TYPE_FLASH_LSO: {
       dict->SetString(kKeyType, "flash_lso");
       dict->SetString(kKeyIcon, "chrome://theme/IDR_COOKIE_ICON");
@@ -295,5 +295,5 @@ bool CookiesTreeModelUtil::GetCookieTreeNodeDictionary(
       dict->SetString(kKeyDomain, node.GetDetailedInfo().flash_lso_domain);
       break;
-    }
+    }*/
     default:
 #if defined(OS_MACOSX)
diff --git a/chrome/browser/ui/webui/options/content_settings_handler.cc b/chrome/browser/ui/webui/options/content_settings_handler.cc
index 071a24e..683b43c 100644
--- a/chrome/browser/ui/webui/options/content_settings_handler.cc
+++ b/chrome/browser/ui/webui/options/content_settings_handler.cc
@@ -321,4 +321,5 @@ ContentSettingsHandler::MediaSettingsInfo::~MediaSettingsInfo() {
 }
 
+/*
 ContentSettingsHandler::MediaSettingsInfo::ForFlash::ForFlash()
     : default_setting(CONTENT_SETTING_DEFAULT),
@@ -333,5 +334,5 @@ ContentSettingsHandler::MediaSettingsInfo::ForFlash&
     ContentSettingsHandler::MediaSettingsInfo::forFlash() {
   return flash_settings_;
-}
+}*/
 
 ContentSettingsHandler::MediaSettingsInfo::ForOneType&
@@ -348,6 +349,6 @@ ContentSettingsHandler::MediaSettingsInfo::ForOneType&
 
 ContentSettingsHandler::MediaSettingsInfo::ForOneType::ForOneType()
-    : show_flash_default_link(false),
-      show_flash_exceptions_link(false),
+    : //show_flash_default_link(false),
+      //show_flash_exceptions_link(false),
       default_setting(CONTENT_SETTING_DEFAULT),
       policy_disable(false),
@@ -392,6 +393,6 @@ void ContentSettingsHandler::GetLocalizedValues(
     {"cookiesBlock3rdParty", IDS_COOKIES_BLOCK_3RDPARTY_CHKBOX},
     {"cookiesShowCookies", IDS_COOKIES_SHOW_COOKIES_BUTTON},
-    {"flashStorageSettings", IDS_FLASH_STORAGE_SETTINGS},
-    {"flashStorageUrl", IDS_FLASH_STORAGE_URL},
+    //{"flashStorageSettings", IDS_FLASH_STORAGE_SETTINGS},
+    //{"flashStorageUrl", IDS_FLASH_STORAGE_URL},
 #if BUILDFLAG(ENABLE_GOOGLE_NOW)
     {"googleGeolocationAccessEnable",
@@ -459,5 +460,5 @@ void ContentSettingsHandler::GetLocalizedValues(
     {"mediaStreamCameraBlock", IDS_MEDIA_STREAM_BLOCK_VIDEO_ONLY_RADIO},
     // Flash media settings.
-    {"mediaPepperFlashMicDefaultDivergedLabel",
+/*    {"mediaPepperFlashMicDefaultDivergedLabel",
      IDS_MEDIA_PEPPER_FLASH_MIC_DEFAULT_DIVERGED_LABEL},
     {"mediaPepperFlashCameraDefaultDivergedLabel",
@@ -469,5 +470,5 @@ void ContentSettingsHandler::GetLocalizedValues(
     {"mediaPepperFlashChangeLink", IDS_MEDIA_PEPPER_FLASH_CHANGE_LINK},
     {"mediaPepperFlashGlobalPrivacyURL", IDS_FLASH_GLOBAL_PRIVACY_URL},
-    {"mediaPepperFlashWebsitePrivacyURL", IDS_FLASH_WEBSITE_PRIVACY_URL},
+    {"mediaPepperFlashWebsitePrivacyURL", IDS_FLASH_WEBSITE_PRIVACY_URL},*/
     // PPAPI broker filter.
     {"ppapiBrokerHeader", IDS_PPAPI_BROKER_HEADER},
@@ -586,8 +587,8 @@ void ContentSettingsHandler::InitializeHandler() {
   PrefService* prefs = user_prefs::UserPrefs::Get(context);
   pref_change_registrar_.Init(prefs);
-  pref_change_registrar_.Add(
+/*  pref_change_registrar_.Add(
       prefs::kPepperFlashSettingsEnabled,
       base::Bind(&ContentSettingsHandler::OnPepperFlashPrefChanged,
-                 base::Unretained(this)));
+                 base::Unretained(this)));*/
   pref_change_registrar_.Add(
       prefs::kAudioCaptureAllowed,
@@ -626,5 +627,5 @@ void ContentSettingsHandler::InitializeHandler() {
                          base::Unretained(this)));
 
-  flash_settings_manager_.reset(new PepperFlashSettingsManager(this, context));
+  //flash_settings_manager_.reset(new PepperFlashSettingsManager(this, context));
 
   Profile* profile = Profile::FromWebUI(web_ui());
@@ -640,5 +641,5 @@ void ContentSettingsHandler::InitializeHandler() {
 void ContentSettingsHandler::InitializePage() {
   media_settings_.reset(new MediaSettingsInfo());
-  RefreshFlashMediaSettings();
+//  RefreshFlashMediaSettings();
 
   UpdateHandlersEnabledRadios();
@@ -700,9 +701,10 @@ void ContentSettingsHandler::Observe(
 }
 
-void ContentSettingsHandler::OnGetPermissionSettingsCompleted(
+/*void ContentSettingsHandler::OnGetPermissionSettingsCompleted(
     uint32_t request_id,
     bool success,
-    PP_Flash_BrowserOperations_Permission default_permission,
-    const ppapi::FlashSiteSettings& sites) {
+//    PP_Flash_BrowserOperations_Permission default_permission,
+    //const ppapi::FlashSiteSettings& sites
+    ) {
   MediaSettingsInfo::ForFlash& settings = media_settings_->forFlash();
   if (success && request_id == settings.last_refresh_request_id) {
@@ -719,5 +721,5 @@ void ContentSettingsHandler::OnGetPermissionSettingsCompleted(
     UpdateFlashMediaLinksVisibility(CONTENT_SETTINGS_TYPE_MEDIASTREAM_CAMERA);
   }
-}
+}*/
 
 void ContentSettingsHandler::UpdateSettingDefaultFromModel(
@@ -780,5 +782,5 @@ void ContentSettingsHandler::UpdateMediaSettingsFromPrefs(
   settings.default_setting_initialized = true;
 
-  UpdateFlashMediaLinksVisibility(type);
+//  UpdateFlashMediaLinksVisibility(type);
   UpdateMediaDeviceDropdownVisibility(type);
 }
@@ -820,5 +822,5 @@ void ContentSettingsHandler::UpdateExceptionsViewFromModel(
   } else if (type == CONTENT_SETTINGS_TYPE_MEDIASTREAM_MIC ||
              type == CONTENT_SETTINGS_TYPE_MEDIASTREAM_CAMERA) {
-    CompareMediaExceptionsWithFlash(type);
+    //CompareMediaExceptionsWithFlash(type);
     UpdateExceptionsViewFromHostContentSettingsMap(type);
   } else if (type == CONTENT_SETTINGS_TYPE_MIDI_SYSEX) {
@@ -941,5 +943,5 @@ void ContentSettingsHandler::UpdateNotificationExceptionsView() {
 }
 
-void ContentSettingsHandler::CompareMediaExceptionsWithFlash(
+/*void ContentSettingsHandler::CompareMediaExceptionsWithFlash(
     ContentSettingsType type) {
   MediaSettingsInfo::ForOneType& settings = media_settings_->forType(type);
@@ -978,5 +980,5 @@ void ContentSettingsHandler::CompareMediaExceptionsWithFlash(
   settings.exceptions_initialized = true;
   UpdateFlashMediaLinksVisibility(type);
-}
+}*/
 
 void ContentSettingsHandler::UpdateMIDISysExExceptionsView() {
@@ -1387,5 +1389,5 @@ Profile* ContentSettingsHandler::GetOTRProfile() {
 }
 
-void ContentSettingsHandler::RefreshFlashMediaSettings() {
+/*void ContentSettingsHandler::RefreshFlashMediaSettings() {
   MediaSettingsInfo::ForFlash& settings = media_settings_->forFlash();
   settings.initialized = false;
@@ -1411,5 +1413,5 @@ void ContentSettingsHandler::OnPepperFlashPrefChanged() {
   else
     media_settings_->forFlash().initialized = false;
-}
+}*/
 
 void ContentSettingsHandler::OnZoomLevelChanged(
@@ -1418,5 +1420,5 @@ void ContentSettingsHandler::OnZoomLevelChanged(
 }
 
-void ContentSettingsHandler::ShowFlashMediaLink(
+/*void ContentSettingsHandler::ShowFlashMediaLink(
     LinkType link_type, ContentSettingsType content_type, bool show) {
   MediaSettingsInfo::ForOneType& settings =
@@ -1484,5 +1486,5 @@ void ContentSettingsHandler::UpdateFlashMediaLinksVisibility(
     ShowFlashMediaLink(EXCEPTIONS, type, true);
   }
-}
+}*/
 
 void ContentSettingsHandler::UpdateMediaDeviceDropdownVisibility(
diff --git a/chrome/browser/ui/webui/options/content_settings_handler.h b/chrome/browser/ui/webui/options/content_settings_handler.h
index 768ff70..5157b82 100644
--- a/chrome/browser/ui/webui/options/content_settings_handler.h
+++ b/chrome/browser/ui/webui/options/content_settings_handler.h
@@ -14,7 +14,7 @@
 #include "base/scoped_observer.h"
 #include "base/values.h"
-#include "chrome/browser/pepper_flash_settings_manager.h"
+//#include "chrome/browser/pepper_flash_settings_manager.h"
 #include "chrome/browser/ui/webui/options/options_ui.h"
-#include "chrome/browser/ui/webui/options/pepper_flash_content_settings_utils.h"
+//#include "chrome/browser/ui/webui/options/pepper_flash_content_settings_utils.h"
 #include "components/content_settings/core/browser/content_settings_observer.h"
 #include "components/content_settings/core/common/content_settings.h"
@@ -37,6 +37,6 @@ namespace options {
 class ContentSettingsHandler : public OptionsPageUIHandler,
                                public content_settings::Observer,
-                               public content::NotificationObserver,
-                               public PepperFlashSettingsManager::Client {
+                               public content::NotificationObserver {
+//                               public PepperFlashSettingsManager::Client {
  public:
   ContentSettingsHandler();
@@ -61,9 +61,9 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
 
   // PepperFlashSettingsManager::Client implementation.
-  void OnGetPermissionSettingsCompleted(
+/*  void OnGetPermissionSettingsCompleted(
       uint32_t request_id,
       bool success,
       PP_Flash_BrowserOperations_Permission default_permission,
-      const ppapi::FlashSiteSettings& sites) override;
+      const ppapi::FlashSiteSettings& sites) override;*/
 
  private:
@@ -76,5 +76,5 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
 
     // Cached Pepper Flash settings.
-    struct ForFlash {
+/*    struct ForFlash {
       ForFlash();
       ~ForFlash();
@@ -84,5 +84,5 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
       bool initialized;
       uint32_t last_refresh_request_id;
-    };
+    };*/
 
     struct ForOneType {
@@ -98,15 +98,15 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
       bool policy_disable;
       bool default_setting_initialized;
-      MediaExceptions exceptions;
+      //MediaExceptions exceptions;
       bool exceptions_initialized;
     };
 
     ForOneType& forType(ContentSettingsType type);
-    ForFlash& forFlash();
+    //ForFlash& forFlash();
 
    private:
     ForOneType mic_settings_;
     ForOneType camera_settings_;
-    ForFlash flash_settings_;
+    //ForFlash flash_settings_;
 
     DISALLOW_COPY_AND_ASSIGN(MediaSettingsInfo);
@@ -150,5 +150,5 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
   // Compares the exceptions of the camera or microphone |type| with its Flash
   // counterparts and updates the Flash links' visibility accordingly.
-  void CompareMediaExceptionsWithFlash(ContentSettingsType type);
+//  void CompareMediaExceptionsWithFlash(ContentSettingsType type);
 
   // Clobbers and rebuilds just the MIDI SysEx exception table.
@@ -250,15 +250,15 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
   ProtocolHandlerRegistry* GetProtocolHandlerRegistry();
 
-  void RefreshFlashMediaSettings();
+  //void RefreshFlashMediaSettings();
 
-  void OnPepperFlashPrefChanged();
+  //void OnPepperFlashPrefChanged();
 
   // content::HostZoomMap subscription.
   void OnZoomLevelChanged(const content::HostZoomMap::ZoomLevelChange& change);
 
-  void ShowFlashMediaLink(
-      LinkType link_type, ContentSettingsType content_type, bool show);
+//  void ShowFlashMediaLink(
+//      LinkType link_type, ContentSettingsType content_type, bool show);
 
-  void UpdateFlashMediaLinksVisibility(ContentSettingsType type);
+//  void UpdateFlashMediaLinksVisibility(ContentSettingsType type);
 
   void UpdateMediaDeviceDropdownVisibility(ContentSettingsType type);
@@ -270,5 +270,5 @@ class ContentSettingsHandler : public OptionsPageUIHandler,
   content::NotificationRegistrar notification_registrar_;
   PrefChangeRegistrar pref_change_registrar_;
-  std::unique_ptr<PepperFlashSettingsManager> flash_settings_manager_;
+  //std::unique_ptr<PepperFlashSettingsManager> flash_settings_manager_;
   std::unique_ptr<MediaSettingsInfo> media_settings_;
   std::unique_ptr<content::HostZoomMap::Subscription>
diff --git a/chrome/browser/ui/webui/options/cookies_view_handler.cc b/chrome/browser/ui/webui/options/cookies_view_handler.cc
index 2737f66..df46fac 100644
--- a/chrome/browser/ui/webui/options/cookies_view_handler.cc
+++ b/chrome/browser/ui/webui/options/cookies_view_handler.cc
@@ -19,5 +19,5 @@
 #include "chrome/browser/browsing_data/browsing_data_database_helper.h"
 #include "chrome/browser/browsing_data/browsing_data_file_system_helper.h"
-#include "chrome/browser/browsing_data/browsing_data_flash_lso_helper.h"
+//#include "chrome/browser/browsing_data/browsing_data_flash_lso_helper.h"
 #include "chrome/browser/browsing_data/browsing_data_indexed_db_helper.h"
 #include "chrome/browser/browsing_data/browsing_data_local_storage_helper.h"
@@ -93,5 +93,5 @@ void CookiesViewHandler::GetLocalizedValues(
       {"cookie_service_worker", IDS_COOKIES_SERVICE_WORKER},
       {"cookie_cache_storage", IDS_COOKIES_CACHE_STORAGE},
-      {"cookie_flash_lso", IDS_COOKIES_FLASH_LSO},
+      //{"cookie_flash_lso", IDS_COOKIES_FLASH_LSO},
       {"search_cookies", IDS_COOKIES_SEARCH_COOKIES},
       {"remove_cookie", IDS_COOKIES_REMOVE_LABEL},
@@ -215,6 +215,7 @@ void CookiesViewHandler::EnsureCookiesTreeModelCreated() {
         BrowsingDataChannelIDHelper::Create(profile->GetRequestContext()),
         new BrowsingDataServiceWorkerHelper(service_worker_context),
-        new BrowsingDataCacheStorageHelper(cache_storage_context),
-        BrowsingDataFlashLSOHelper::Create(profile));
+        new BrowsingDataCacheStorageHelper(cache_storage_context)
+        //BrowsingDataFlashLSOHelper::Create(profile)
+        );
     cookies_tree_model_.reset(new CookiesTreeModel(
         container, profile->GetExtensionSpecialStoragePolicy()));
diff --git a/chrome/browser/ui/webui/options/core_options_handler.cc b/chrome/browser/ui/webui/options/core_options_handler.cc
index f843155..3477418 100644
--- a/chrome/browser/ui/webui/options/core_options_handler.cc
+++ b/chrome/browser/ui/webui/options/core_options_handler.cc
@@ -77,5 +77,5 @@ CoreOptionsHandler::~CoreOptionsHandler() {}
 
 void CoreOptionsHandler::InitializeHandler() {
-  Profile* profile = Profile::FromWebUI(web_ui());
+  /*Profile* profile = Profile::FromWebUI(web_ui());
 
   plugin_status_pref_setter_.Init(
@@ -83,5 +83,5 @@ void CoreOptionsHandler::InitializeHandler() {
       base::Bind(&CoreOptionsHandler::OnPreferenceChanged,
                  base::Unretained(this),
-                 profile->GetPrefs()));
+                 profile->GetPrefs()));*/
 
   pref_change_filters_[prefs::kBrowserGuestModeEnabled] =
@@ -94,6 +94,6 @@ void CoreOptionsHandler::InitializeHandler() {
 
 void CoreOptionsHandler::InitializePage() {
-  UpdateClearPluginLSOData();
-  UpdatePepperFlashSettingsEnabled();
+/*  UpdateClearPluginLSOData();
+  UpdatePepperFlashSettingsEnabled();*/
 }
 
@@ -190,9 +190,9 @@ void CoreOptionsHandler::OnPreferenceChanged(PrefService* service,
   if (pref_name == prefs::kClearPluginLSODataEnabled) {
     // This preference is stored in Local State, not in the user preferences.
-    UpdateClearPluginLSOData();
+//    UpdateClearPluginLSOData();
     return;
   }
   if (pref_name == prefs::kPepperFlashSettingsEnabled) {
-    UpdatePepperFlashSettingsEnabled();
+    //UpdatePepperFlashSettingsEnabled();
     return;
   }
@@ -646,5 +646,5 @@ void CoreOptionsHandler::HandleDisableExtension(const base::ListValue* args) {
 }
 
-void CoreOptionsHandler::UpdateClearPluginLSOData() {
+/*void CoreOptionsHandler::UpdateClearPluginLSOData() {
   base::FundamentalValue enabled(
           plugin_status_pref_setter_.IsClearPluginLSODataEnabled());
@@ -658,5 +658,5 @@ void CoreOptionsHandler::UpdatePepperFlashSettingsEnabled() {
   web_ui()->CallJavascriptFunctionUnsafe(
       "options.OptionsPage.setPepperFlashSettingsEnabled", enabled);
-}
+}*/
 
 bool CoreOptionsHandler::IsUserUnsupervised(const base::Value* to_value) {
diff --git a/chrome/browser/ui/webui/options/core_options_handler.h b/chrome/browser/ui/webui/options/core_options_handler.h
index ae17b20..6591b62 100644
--- a/chrome/browser/ui/webui/options/core_options_handler.h
+++ b/chrome/browser/ui/webui/options/core_options_handler.h
@@ -173,5 +173,5 @@ class CoreOptionsHandler : public OptionsPageUIHandler {
   PrefChangeRegistrar local_state_registrar_;
 
-  PluginStatusPrefSetter plugin_status_pref_setter_;
+//  PluginStatusPrefSetter plugin_status_pref_setter_;
 
   // This maps pref names to filter functions. The callbacks should take the
diff --git a/chrome/browser/ui/webui/settings/settings_cookies_view_handler.cc b/chrome/browser/ui/webui/settings/settings_cookies_view_handler.cc
index 6881c7e..616c7f1 100644
--- a/chrome/browser/ui/webui/settings/settings_cookies_view_handler.cc
+++ b/chrome/browser/ui/webui/settings/settings_cookies_view_handler.cc
@@ -19,5 +19,5 @@
 #include "chrome/browser/browsing_data/browsing_data_database_helper.h"
 #include "chrome/browser/browsing_data/browsing_data_file_system_helper.h"
-#include "chrome/browser/browsing_data/browsing_data_flash_lso_helper.h"
+//#include "chrome/browser/browsing_data/browsing_data_flash_lso_helper.h"
 #include "chrome/browser/browsing_data/browsing_data_indexed_db_helper.h"
 #include "chrome/browser/browsing_data/browsing_data_local_storage_helper.h"
@@ -162,6 +162,7 @@ void CookiesViewHandler::EnsureCookiesTreeModelCreated() {
         BrowsingDataChannelIDHelper::Create(profile->GetRequestContext()),
         new BrowsingDataServiceWorkerHelper(service_worker_context),
-        new BrowsingDataCacheStorageHelper(cache_storage_context),
-        BrowsingDataFlashLSOHelper::Create(profile));
+        new BrowsingDataCacheStorageHelper(cache_storage_context)
+        //BrowsingDataFlashLSOHelper::Create(profile)
+        );
     cookies_tree_model_.reset(
         new CookiesTreeModel(container,
diff --git a/chrome/BUILD.gn b/chrome/BUILD.gn
index 1268872..b78396a 100644
--- a/chrome/BUILD.gn
+++ b/chrome/BUILD.gn
@@ -15,5 +15,5 @@ import("//chrome/chrome_repack_locales.gni")
 import("//chrome/common/features.gni")
 import("//chrome/version.gni")
-import("//third_party/widevine/cdm/widevine.gni")
+#import("//third_party/widevine/cdm/widevine.gni")
 import("//ui/base/ui_features.gni")
 import("//v8/gni/v8.gni")
@@ -270,5 +270,5 @@ if (!is_android && !is_mac) {
     }
 
-    data_deps += [ "//third_party/widevine/cdm:widevinecdmadapter" ]
+#    data_deps += [ "//third_party/widevine/cdm:widevinecdmadapter" ]
 
     if (is_multi_dll_chrome) {
diff --git a/chrome/chrome_browser.gypi b/chrome/chrome_browser.gypi
index 557ca83..81fe34c 100644
--- a/chrome/chrome_browser.gypi
+++ b/chrome/chrome_browser.gypi
@@ -1264,6 +1264,6 @@
       'browser/chrome_process_singleton.cc',
       'browser/chrome_process_singleton.h',
-      'browser/component_updater/widevine_cdm_component_installer.cc',
-      'browser/component_updater/widevine_cdm_component_installer.h',
+#      'browser/component_updater/widevine_cdm_component_installer.cc',
+#      'browser/component_updater/widevine_cdm_component_installer.h',
       'browser/custom_handlers/register_protocol_handler_permission_request.cc',
       'browser/custom_handlers/register_protocol_handler_permission_request.h',
@@ -3372,5 +3372,5 @@
         '../third_party/icu/icu.gyp:icuuc',
         '../third_party/libxml/libxml.gyp:libxml',
-        '../third_party/widevine/cdm/widevine_cdm.gyp:widevine_cdm_version_h',
+        #'../third_party/widevine/cdm/widevine_cdm.gyp:widevine_cdm_version_h',
         '../third_party/zlib/google/zip.gyp:compression_utils',
         '../third_party/zlib/google/zip.gyp:zip',
diff --git a/chrome/chrome_common.gypi b/chrome/chrome_common.gypi
index 8492d96..4a80526 100644
--- a/chrome/chrome_common.gypi
+++ b/chrome/chrome_common.gypi
@@ -108,6 +108,6 @@
       'common/web_application_info.cc',
       'common/web_application_info.h',
-      'common/widevine_cdm_constants.cc',
-      'common/widevine_cdm_constants.h',
+      #'common/widevine_cdm_constants.cc',
+      #'common/widevine_cdm_constants.h',
     ],
     'chrome_common_extensions_sources': [
@@ -414,5 +414,5 @@
             '<(DEPTH)/media/media.gyp:media',
             '<(DEPTH)/third_party/re2/re2.gyp:re2',
-            '<(DEPTH)/third_party/widevine/cdm/widevine_cdm.gyp:widevine_cdm_version_h',
+            #'<(DEPTH)/third_party/widevine/cdm/widevine_cdm.gyp:widevine_cdm_version_h',
           ],
         }, {  # OS == ios
diff --git a/chrome/chrome_tests_unit.gypi b/chrome/chrome_tests_unit.gypi
index 30acd0e..4761512 100644
--- a/chrome/chrome_tests_unit.gypi
+++ b/chrome/chrome_tests_unit.gypi
@@ -454,5 +454,5 @@
       'browser/extensions/api/image_writer_private/operation_manager_unittest.cc',
       'browser/extensions/api/image_writer_private/operation_unittest.cc',
-      'browser/extensions/api/image_writer_private/removable_storage_provider_chromeos_unittest.cc',
+#      'browser/extensions/api/image_writer_private/removable_storage_provider_chromeos_unittest.cc',
       'browser/extensions/api/image_writer_private/test_utils.cc',
       'browser/extensions/api/image_writer_private/write_from_file_operation_unittest.cc',
diff --git a/chrome/common/BUILD.gn b/chrome/common/BUILD.gn
index 0bf6642..0159258 100644
--- a/chrome/common/BUILD.gn
+++ b/chrome/common/BUILD.gn
@@ -115,5 +115,5 @@ static_library("common") {
     "//third_party/kasko:kasko_features",
     "//third_party/re2",
-    "//third_party/widevine/cdm:version_h",
+    #"//third_party/widevine/cdm:version_h",
     "//third_party/zlib:zip",
     "//ui/accessibility",
@@ -315,5 +315,5 @@ static_library("constants") {
     "//components/nacl/common:switches",
     "//media:cdm_paths",  # Needed by chrome_paths.cc.
-    "//third_party/widevine/cdm:version_h",
+    #"//third_party/widevine/cdm:version_h",
   ]
 
diff --git a/chrome/common/chrome_content_client.cc b/chrome/common/chrome_content_client.cc
index 483c3c8..4b33029 100644
--- a/chrome/common/chrome_content_client.cc
+++ b/chrome/common/chrome_content_client.cc
@@ -49,5 +49,5 @@
 #include "ui/base/layout.h"
 #include "ui/base/resource/resource_bundle.h"
-#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
 
 #if defined(OS_LINUX)
diff --git a/chrome/common/chrome_paths.cc b/chrome/common/chrome_paths.cc
index 8649931..20bd23b 100644
--- a/chrome/common/chrome_paths.cc
+++ b/chrome/common/chrome_paths.cc
@@ -34,5 +34,5 @@
 #endif
 
-#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
 
 namespace {
diff --git a/chrome/renderer/BUILD.gn b/chrome/renderer/BUILD.gn
index 200f03d..4547c03 100644
--- a/chrome/renderer/BUILD.gn
+++ b/chrome/renderer/BUILD.gn
@@ -71,5 +71,5 @@ static_library("renderer") {
     "//third_party/icu",
     "//third_party/re2",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//ui/surface",
     "//v8:v8",
diff --git a/chrome/renderer/chrome_content_renderer_client.cc b/chrome/renderer/chrome_content_renderer_client.cc
index 66b4564..b851a8a 100644
--- a/chrome/renderer/chrome_content_renderer_client.cc
+++ b/chrome/renderer/chrome_content_renderer_client.cc
@@ -115,5 +115,5 @@
 #include "ui/base/resource/resource_bundle.h"
 #include "ui/base/webui/jstemplate_builder.h"
-#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
 
 #if !defined(DISABLE_NACL)
@@ -432,5 +432,5 @@ void ChromeContentRendererClient::RenderThreadStarted() {
   WebSecurityPolicy::registerURLSchemeAsSecure(chrome_search_scheme);
 
-#if defined(ENABLE_PRINT_PREVIEW)
+#if defined(ENABLE_PRINT_PREVIEW) && defined(ENABLE_PEPPER_CDMS)
   pdf_print_client_.reset(new ChromePDFPrintClient());
   pdf::PepperPDFHost::SetPrintClient(pdf_print_client_.get());
@@ -1210,5 +1210,5 @@ ChromeContentRendererClient::OverrideSpeechSynthesizer(
 bool ChromeContentRendererClient::AllowPepperMediaStreamAPI(
     const GURL& url) {
-#if defined(OS_ANDROID)
+#if defined(OS_ANDROID) || !defined(ENABLE_PLUGINS)
   return false;
 #else
diff --git a/chrome/renderer/media/chrome_key_systems.cc b/chrome/renderer/media/chrome_key_systems.cc
index 4c02dfe..3a7286a 100644
--- a/chrome/renderer/media/chrome_key_systems.cc
+++ b/chrome/renderer/media/chrome_key_systems.cc
@@ -16,5 +16,5 @@
 #include "build/build_config.h"
 #include "chrome/common/render_messages.h"
-#include "components/cdm/renderer/widevine_key_system_properties.h"
+//#include "components/cdm/renderer/widevine_key_system_properties.h"
 #include "content/public/renderer/render_thread.h"
 #include "media/base/eme_constants.h"
@@ -25,5 +25,5 @@
 #endif
 
-#include "widevine_cdm_version.h" // In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h" // In SHARED_INTERMEDIATE_DIR.
 
 // The following must be after widevine_cdm_version.h.
diff --git a/chrome/renderer/pepper/chrome_pdf_print_client.cc b/chrome/renderer/pepper/chrome_pdf_print_client.cc
index a0d8fee..b3c9ea3 100644
--- a/chrome/renderer/pepper/chrome_pdf_print_client.cc
+++ b/chrome/renderer/pepper/chrome_pdf_print_client.cc
@@ -16,9 +16,9 @@ namespace {
 
 blink::WebElement GetWebElement(PP_Instance instance_id) {
-  content::PepperPluginInstance* instance =
+/*  content::PepperPluginInstance* instance =
       content::PepperPluginInstance::Get(instance_id);
-  if (!instance)
+  if (!instance)*/
     return blink::WebElement();
-  return instance->GetContainer()->element();
+//  return instance->GetContainer()->element();
 }
 
diff --git a/chrome/renderer/plugins/plugin_uma.cc b/chrome/renderer/plugins/plugin_uma.cc
index 8c7c7c1..533978a 100644
--- a/chrome/renderer/plugins/plugin_uma.cc
+++ b/chrome/renderer/plugins/plugin_uma.cc
@@ -12,5 +12,5 @@
 #include "base/strings/string_util.h"
 #include "content/public/common/content_constants.h"
-#include "third_party/widevine/cdm/widevine_cdm_common.h"
+//#include "third_party/widevine/cdm/widevine_cdm_common.h"
 
 namespace {
diff --git a/chrome/test/BUILD.gn b/chrome/test/BUILD.gn
index 36693be..d7e1983 100644
--- a/chrome/test/BUILD.gn
+++ b/chrome/test/BUILD.gn
@@ -643,8 +643,16 @@ if (!is_android) {
     }  # enable_notifications
 
-    if (!use_aura || is_chromeos) {
-      sources -=
-          [ "../../ui/views/corewm/desktop_capture_controller_unittest.cc" ]
-    }
+#    if (!use_aura || is_chromeos) {
+#ERROR at //chrome/test/BUILD.gn:664:13: Item not found
+#          [ "../../ui/views/corewm/desktop_capture_controller_unittest.cc" ]
+#            ^-------------------------------------------------------------
+#You were trying to remove "../../ui/views/corewm/desktop_capture_controller_unittest.cc"
+#from the list but it wasn't there.
+#See //BUILD.gn:526:9: which caused the file to be included.
+#        "//chrome/test:load_library_perf_tests",
+#        ^--------------------------------------
+#      sources -=
+#          [ "../../ui/views/corewm/desktop_capture_controller_unittest.cc" ]
+#    }
   }
 
@@ -989,5 +997,5 @@ test("browser_tests") {
       "//crypto:test_support",
       "//device/bluetooth:mocks",
-      "//device/serial:test_support",
+#      "//device/serial:test_support",
       "//device/usb:test_support",
       "//google_apis:test_support",
@@ -1009,5 +1017,5 @@ test("browser_tests") {
       "//third_party/libjingle",
       "//third_party/webrtc/modules/desktop_capture",
-      "//third_party/widevine/cdm:version_h",
+#      "//third_party/widevine/cdm:version_h",
       "//ui/accessibility:test_support",
       "//ui/base:test_support",
@@ -1026,5 +1034,5 @@ test("browser_tests") {
       "//remoting/webapp:unit_tests",
       "//third_party/mesa:osmesa",
-      "//third_party/widevine/cdm:widevine_test_license_server",
+#      "//third_party/widevine/cdm:widevine_test_license_server",
     ]
 
@@ -1674,5 +1682,5 @@ if (!is_android) {
       "//testing/gtest",
       "//testing/perf",
-      "//third_party/widevine/cdm:version_h",
+#      "//third_party/widevine/cdm:version_h",
     ]
 
diff --git a/components/cdm/renderer/BUILD.gn b/components/cdm/renderer/BUILD.gn
index f364f89..47c67d4 100644
--- a/components/cdm/renderer/BUILD.gn
+++ b/components/cdm/renderer/BUILD.gn
@@ -5,6 +5,6 @@
 static_library("renderer") {
   sources = [
-    "widevine_key_system_properties.cc",
-    "widevine_key_system_properties.h",
+#    "widevine_key_system_properties.cc",
+#    "widevine_key_system_properties.h",
   ]
 
@@ -21,5 +21,5 @@ static_library("renderer") {
     "//content/public/renderer",
     "//media",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
   ]
 }
diff --git a/components/storage_monitor/storage_monitor.cc b/components/storage_monitor/storage_monitor.cc
index beb45fd..22edeaf 100644
--- a/components/storage_monitor/storage_monitor.cc
+++ b/components/storage_monitor/storage_monitor.cc
@@ -53,5 +53,5 @@ void StorageMonitor::ReceiverImpl::MarkInitialized() {
 void StorageMonitor::Create() {
   delete g_storage_monitor;
-  g_storage_monitor = CreateInternal();
+  g_storage_monitor = NULL;//CreateInternal();
 }
 
diff --git a/content/browser/renderer_host/render_message_filter.cc b/content/browser/renderer_host/render_message_filter.cc
index c408279..b9eb808 100644
--- a/content/browser/renderer_host/render_message_filter.cc
+++ b/content/browser/renderer_host/render_message_filter.cc
@@ -35,5 +35,5 @@
 #include "content/browser/loader/resource_dispatcher_host_impl.h"
 #include "content/browser/media/media_internals.h"
-#include "content/browser/renderer_host/pepper/pepper_security_helper.h"
+//#include "content/browser/renderer_host/pepper/pepper_security_helper.h"
 #include "content/browser/renderer_host/render_process_host_impl.h"
 #include "content/browser/renderer_host/render_view_host_delegate.h"
diff --git a/content/browser/renderer_host/render_process_host_impl.cc b/content/browser/renderer_host/render_process_host_impl.cc
index dc2f91b..d315676 100644
--- a/content/browser/renderer_host/render_process_host_impl.cc
+++ b/content/browser/renderer_host/render_process_host_impl.cc
@@ -105,6 +105,6 @@
 #include "content/browser/renderer_host/media/video_capture_host.h"
 #include "content/browser/renderer_host/offscreen_canvas_surface_impl.h"
-#include "content/browser/renderer_host/pepper/pepper_message_filter.h"
-#include "content/browser/renderer_host/pepper/pepper_renderer_connection.h"
+//#include "content/browser/renderer_host/pepper/pepper_message_filter.h"
+//#include "content/browser/renderer_host/pepper/pepper_renderer_connection.h"
 #include "content/browser/renderer_host/render_message_filter.h"
 #include "content/browser/renderer_host/render_view_host_delegate.h"
@@ -1556,5 +1556,5 @@ void RenderProcessHostImpl::PropagateBrowserCommandLineToRenderer(
     switches::kDisableNotifications,
     switches::kDisableOverlayScrollbar,
-    switches::kDisablePepper3DImageChromium,
+    //switches::kDisablePepper3DImageChromium,
     switches::kDisablePermissionsAPI,
     switches::kDisablePresentationAPI,
@@ -1644,5 +1644,5 @@ void RenderProcessHostImpl::PropagateBrowserCommandLineToRenderer(
     switches::kReducedReferrerGranularity,
     switches::kReduceSecurityForTesting,
-    switches::kRegisterPepperPlugins,
+//    switches::kRegisterPepperPlugins,
     switches::kRendererStartupDialog,
     switches::kRootLayerScrolls,
diff --git a/content/public/child/BUILD.gn b/content/public/child/BUILD.gn
index 00bdfa3..09f186f 100644
--- a/content/public/child/BUILD.gn
+++ b/content/public/child/BUILD.gn
@@ -18,5 +18,5 @@ group("child") {
       public_deps += [
         "//content/gpu",
-        "//content/ppapi_plugin",
+#        "//content/ppapi_plugin",
       ]
     }
diff --git a/content/public/renderer/BUILD.gn b/content/public/renderer/BUILD.gn
index fbdc573..1548315 100644
--- a/content/public/renderer/BUILD.gn
+++ b/content/public/renderer/BUILD.gn
@@ -46,5 +46,5 @@ target(link_target_type, "renderer_sources") {
     "//third_party/WebKit/public:blink_headers",
     "//third_party/libjingle",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//ui/base",
     "//ui/base/ime",
diff --git a/content/renderer/BUILD.gn b/content/renderer/BUILD.gn
index 0da94dd..b5d1587 100644
--- a/content/renderer/BUILD.gn
+++ b/content/renderer/BUILD.gn
@@ -85,5 +85,5 @@ target(link_target_type, "renderer") {
     "//third_party/libjingle",
     "//third_party/libyuv",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//ui/accessibility",
     "//ui/base",
diff --git a/content/renderer/media/render_media_client.h b/content/renderer/media/render_media_client.h
index 8f793d9..d4c75ad 100644
--- a/content/renderer/media/render_media_client.h
+++ b/content/renderer/media/render_media_client.h
@@ -15,5 +15,5 @@
 #include "content/common/content_export.h"
 #include "media/base/media_client.h"
-#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
+//#include "widevine_cdm_version.h"  // In SHARED_INTERMEDIATE_DIR.
 
 namespace content {
diff --git a/content/test/BUILD.gn b/content/test/BUILD.gn
index e58ffda..66dd1b9 100644
--- a/content/test/BUILD.gn
+++ b/content/test/BUILD.gn
@@ -686,5 +686,5 @@ test("content_unittests") {
     "//third_party/libjingle",
     "//third_party/re2",
-    "//third_party/widevine/cdm:version_h",
+#    "//third_party/widevine/cdm:version_h",
     "//ui/accessibility",
     "//ui/base:test_support",
diff --git a/extensions/browser/browser_context_keyed_service_factories.cc b/extensions/browser/browser_context_keyed_service_factories.cc
index c779bc9..77e4254 100644
--- a/extensions/browser/browser_context_keyed_service_factories.cc
+++ b/extensions/browser/browser_context_keyed_service_factories.cc
@@ -21,5 +21,5 @@
 #include "extensions/browser/api/power/power_api.h"
 #include "extensions/browser/api/runtime/runtime_api.h"
-#include "extensions/browser/api/serial/serial_connection.h"
+//#include "extensions/browser/api/serial/serial_connection.h"
 #include "extensions/browser/api/socket/socket.h"
 #include "extensions/browser/api/socket/tcp_socket.h"
@@ -51,5 +51,5 @@ void EnsureBrowserContextKeyedServiceFactoriesBuilt() {
   ApiResourceManager<ResumableTCPSocket>::GetFactoryInstance();
   ApiResourceManager<ResumableUDPSocket>::GetFactoryInstance();
-  ApiResourceManager<SerialConnection>::GetFactoryInstance();
+  //ApiResourceManager<SerialConnection>::GetFactoryInstance();
   ApiResourceManager<Socket>::GetFactoryInstance();
   ApiResourceManager<UsbDeviceResource>::GetFactoryInstance();
diff --git a/extensions/browser/BUILD.gn b/extensions/browser/BUILD.gn
index 547b78c..7dab168 100644
--- a/extensions/browser/BUILD.gn
+++ b/extensions/browser/BUILD.gn
@@ -64,5 +64,5 @@ source_set("browser") {
       "//device/hid",
       "//device/power_save_blocker",
-      "//device/serial",
+#      "//device/serial",
       "//device/usb",
       "//extensions/common/api/cast_channel:cast_channel_proto",
diff --git a/extensions/browser/mojo/service_registration.cc b/extensions/browser/mojo/service_registration.cc
index a23a53c..2c5efef 100644
--- a/extensions/browser/mojo/service_registration.cc
+++ b/extensions/browser/mojo/service_registration.cc
@@ -12,5 +12,5 @@
 #include "content/public/browser/render_process_host.h"
 #include "content/public/browser/site_instance.h"
-#include "extensions/browser/api/serial/serial_service_factory.h"
+//#include "extensions/browser/api/serial/serial_service_factory.h"
 #include "extensions/browser/extension_registry.h"
 #include "extensions/browser/extensions_browser_client.h"
@@ -50,5 +50,5 @@ void RegisterServicesForFrame(content::RenderFrameHost* render_frame_host,
   shell::InterfaceRegistry* registry =
       render_frame_host->GetInterfaceRegistry();
-  if (base::CommandLine::ForCurrentProcess()->HasSwitch(
+/*  if (base::CommandLine::ForCurrentProcess()->HasSwitch(
           switches::kEnableMojoSerialService)) {
     if (ExtensionHasPermission(extension, render_frame_host->GetProcess(),
@@ -56,5 +56,5 @@ void RegisterServicesForFrame(content::RenderFrameHost* render_frame_host,
       registry->AddInterface(base::Bind(&BindToSerialServiceRequest));
     }
-  }
+  }*/
   registry->AddInterface(base::Bind(
       KeepAliveImpl::Create,
diff --git a/extensions/BUILD.gn b/extensions/BUILD.gn
index 3e8c5ac..3d361f5 100644
--- a/extensions/BUILD.gn
+++ b/extensions/BUILD.gn
@@ -64,5 +64,5 @@ grit("extensions_renderer_resources") {
   deps = [
     "//chrome/browser/media/router:mojo_bindings__generator",
-    "//device/serial:serial_mojo__generator",
+#    "//device/serial:serial_mojo__generator",
     "//extensions/common:mojo__generator",
     "//extensions/common/api:mojom__generator",
@@ -177,6 +177,6 @@ test("extensions_unittests") {
     "//device/core",
     "//device/hid",
-    "//device/serial",
-    "//device/serial:test_support",
+#    "//device/serial",
+#    "//device/serial:test_support",
     "//extensions/common",
     "//extensions/common/api/cast_channel:cast_channel_proto",
@@ -295,5 +295,5 @@ source_set("chrome_extensions_browsertests") {
     "//crypto:test_support",
     "//device/bluetooth:mocks",
-    "//device/serial:test_support",
+#    "//device/serial:test_support",
     "//extensions/common/api",
     "//google_apis:test_support",
@@ -315,5 +315,5 @@ source_set("chrome_extensions_browsertests") {
     "//third_party/libjingle",
     "//third_party/webrtc/modules/desktop_capture",
-    "//third_party/widevine/cdm:version_h",
+    #"//third_party/widevine/cdm:version_h",
     "//ui/accessibility:test_support",
     "//ui/base:test_support",
diff --git a/extensions/common/api/BUILD.gn b/extensions/common/api/BUILD.gn
index 6dff0be..2d9976c 100644
--- a/extensions/common/api/BUILD.gn
+++ b/extensions/common/api/BUILD.gn
@@ -42,5 +42,5 @@ json_schema_api("api_registration") {
   deps = [
     ":api",
-    "//device/serial",
+    #"//device/serial",
     "//extensions/common/api/cast_channel:cast_channel_proto",
     "//skia",
diff --git a/extensions/common/api/schemas.gypi b/extensions/common/api/schemas.gypi
index 03fdaff..ccb9d81 100644
--- a/extensions/common/api/schemas.gypi
+++ b/extensions/common/api/schemas.gypi
@@ -41,5 +41,5 @@
       'printer_provider_internal.idl',
       'runtime.json',
-      'serial.idl',
+#      'serial.idl',
       'socket.idl',
       'sockets_tcp.idl',
diff --git a/extensions/extensions.gypi b/extensions/extensions.gypi
index 881855a..eec3f58 100644
--- a/extensions/extensions.gypi
+++ b/extensions/extensions.gypi
@@ -404,12 +404,12 @@
       'browser/api/runtime/runtime_api_delegate.cc',
       'browser/api/runtime/runtime_api_delegate.h',
-      'browser/api/serial/serial_api.cc',
-      'browser/api/serial/serial_api.h',
-      'browser/api/serial/serial_connection.cc',
-      'browser/api/serial/serial_connection.h',
-      'browser/api/serial/serial_event_dispatcher.cc',
-      'browser/api/serial/serial_event_dispatcher.h',
-      'browser/api/serial/serial_service_factory.cc',
-      'browser/api/serial/serial_service_factory.h',
+#      'browser/api/serial/serial_api.cc',
+#      'browser/api/serial/serial_api.h',
+#      'browser/api/serial/serial_connection.cc',
+#      'browser/api/serial/serial_connection.h',
+#      'browser/api/serial/serial_event_dispatcher.cc',
+#      'browser/api/serial/serial_event_dispatcher.h',
+#      'browser/api/serial/serial_service_factory.cc',
+#      'browser/api/serial/serial_service_factory.h',
       'browser/api/socket/socket.cc',
       'browser/api/socket/socket.h',
diff --git a/extensions/renderer/dispatcher.cc b/extensions/renderer/dispatcher.cc
index ab8c2e3..04b1a80 100644
--- a/extensions/renderer/dispatcher.cc
+++ b/extensions/renderer/dispatcher.cc
@@ -775,9 +775,9 @@ std::vector<std::pair<std::string, int> > Dispatcher::GetJsResources() {
   resources.push_back(std::make_pair("extensions/common/mojo/keep_alive.mojom",
                                      IDR_KEEP_ALIVE_MOJOM_JS));
-  resources.push_back(std::make_pair("device/serial/data_stream.mojom",
+/*  resources.push_back(std::make_pair("device/serial/data_stream.mojom",
                                      IDR_DATA_STREAM_MOJOM_JS));
   resources.push_back(
       std::make_pair("device/serial/data_stream_serialization.mojom",
-                     IDR_DATA_STREAM_SERIALIZATION_MOJOM_JS));
+                     IDR_DATA_STREAM_SERIALIZATION_MOJOM_JS));*/
   resources.push_back(std::make_pair("stash_client", IDR_STASH_CLIENT_JS));
   resources.push_back(
@@ -820,5 +820,5 @@ std::vector<std::pair<std::string, int> > Dispatcher::GetJsResources() {
   resources.push_back(std::make_pair("binding", IDR_BINDING_JS));
 
-  if (base::CommandLine::ForCurrentProcess()->HasSwitch(
+/*  if (base::CommandLine::ForCurrentProcess()->HasSwitch(
           switches::kEnableMojoSerialService)) {
     resources.push_back(
@@ -829,5 +829,5 @@ std::vector<std::pair<std::string, int> > Dispatcher::GetJsResources() {
       std::make_pair("device/serial/serial.mojom", IDR_SERIAL_MOJOM_JS));
   resources.push_back(std::make_pair("device/serial/serial_serialization.mojom",
-                                     IDR_SERIAL_SERIALIZATION_MOJOM_JS));
+                                     IDR_SERIAL_SERIALIZATION_MOJOM_JS));*/
 
   // Custom types sources.
diff --git a/extensions/renderer/resources/extensions_renderer_resources.grd b/extensions/renderer/resources/extensions_renderer_resources.grd
index cba871e..f8023b2 100644
--- a/extensions/renderer/resources/extensions_renderer_resources.grd
+++ b/extensions/renderer/resources/extensions_renderer_resources.grd
@@ -15,6 +15,6 @@
       <include name="IDR_DATA_RECEIVER_JS" file="data_receiver.js" type="BINDATA" />
       <include name="IDR_DATA_SENDER_JS" file="data_sender.js" type="BINDATA" />
-      <include name="IDR_DATA_STREAM_MOJOM_JS" file="${mojom_root}\device\serial\data_stream.mojom.js" use_base_dir="false" type="BINDATA" />
-      <include name="IDR_DATA_STREAM_SERIALIZATION_MOJOM_JS" file="${mojom_root}\device\serial\data_stream_serialization.mojom.js" use_base_dir="false" type="BINDATA" />
+      <!--      <include name="IDR_DATA_STREAM_MOJOM_JS" file="${mojom_root}\device\serial\data_stream.mojom.js" use_base_dir="false" type="BINDATA" />
+      <include name="IDR_DATA_STREAM_SERIALIZATION_MOJOM_JS" file="${mojom_root}\device\serial\data_stream_serialization.mojom.js" use_base_dir="false" type="BINDATA" /> -->
       <include name="IDR_ENTRY_ID_MANAGER" file="entry_id_manager.js" type="BINDATA" />
       <include name="IDR_EVENT_BINDINGS_JS" file="event.js" type="BINDATA" />
@@ -47,8 +47,8 @@
       <include name="IDR_SCHEMA_UTILS_JS" file="schema_utils.js" type="BINDATA" />
       <include name="IDR_SEND_REQUEST_JS" file="send_request.js" type="BINDATA" />
-      <include name="IDR_SERIAL_CUSTOM_BINDINGS_JS" file="serial_custom_bindings.js" type="BINDATA" />
+      <!--      <include name="IDR_SERIAL_CUSTOM_BINDINGS_JS" file="serial_custom_bindings.js" type="BINDATA" />
       <include name="IDR_SERIAL_MOJOM_JS" file="${mojom_root}\device\serial\serial.mojom.js" use_base_dir="false" type="BINDATA" />
       <include name="IDR_SERIAL_SERIALIZATION_MOJOM_JS" file="${mojom_root}\device\serial\serial_serialization.mojom.js" use_base_dir="false" type="BINDATA" />
-      <include name="IDR_SERIAL_SERVICE_JS" file="serial_service.js" type="BINDATA" />
+      <include name="IDR_SERIAL_SERVICE_JS" file="serial_service.js" type="BINDATA" /> -->
       <include name="IDR_SET_ICON_JS" file="set_icon.js" type="BINDATA" />
       <include name="IDR_STASH_CLIENT_JS" file="stash_client.js" type="BINDATA" />
diff --git a/media/base/key_systems.cc b/media/base/key_systems.cc
index 4567bf4..463f263 100644
--- a/media/base/key_systems.cc
+++ b/media/base/key_systems.cc
@@ -21,5 +21,5 @@
 #include "media/base/media.h"
 #include "media/base/media_client.h"
-#include "third_party/widevine/cdm/widevine_cdm_common.h"
+//#include "third_party/widevine/cdm/widevine_cdm_common.h"
 
 namespace media {
@@ -152,6 +152,6 @@ class ClearKeyProperties : public KeySystemProperties {
 static bool IsPotentiallySupportedKeySystem(const std::string& key_system) {
   // Known and supported key systems.
-  if (key_system == kWidevineKeySystem)
-    return true;
+//  if (key_system == kWidevineKeySystem)
+//    return true;
   if (key_system == kClearKeyKeySystem)
     return true;
diff --git a/tools/battor_agent/BUILD.gn b/tools/battor_agent/BUILD.gn
index 065ee03..ca7a5fd 100644
--- a/tools/battor_agent/BUILD.gn
+++ b/tools/battor_agent/BUILD.gn
@@ -16,5 +16,5 @@ executable("battor_agent") {
     "//base",
     "//build/win:default_exe_manifest",
-    "//device/serial",
+#    "//device/serial",
   ]
 }
@@ -34,10 +34,10 @@ source_set("battor_agent_lib") {
     "battor_sample_converter.cc",
     "battor_sample_converter.h",
-    "serial_utils.cc",
-    "serial_utils.h",
+#    "serial_utils.cc",
+#    "serial_utils.h",
   ]
   deps = [
     "//base",
-    "//device/serial",
+#    "//device/serial",
     "//mojo/public/cpp/bindings",
     "//net",
@@ -51,5 +51,5 @@ test("battor_agent_unittests") {
     "battor_protocol_types_unittest.cc",
     "battor_sample_converter_unittest.cc",
-    "serial_utils_unittest.cc",
+#    "serial_utils_unittest.cc",
   ]
   deps = [
@@ -58,6 +58,6 @@ test("battor_agent_unittests") {
     "//base/test:run_all_unittests",
     "//base/test:test_support",
-    "//device/serial",
-    "//device/serial:test_support",
+#    "//device/serial",
+#    "//device/serial:test_support",
     "//testing/gmock",
     "//testing/gtest",
